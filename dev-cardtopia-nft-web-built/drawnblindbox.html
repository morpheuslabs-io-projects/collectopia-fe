
        <!doctype html>
        <html lang="en">
          <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta name="icon" content="https://ml-webstudio-dev.s3.ap-southeast-1.amazonaws.com/morpheuslabs/favicon.png"></meta><meta name="title" content="dev-cardtopia-nft"></meta><meta name="description" content="Collectopia Platform"></meta><meta name="author" content="https://dev-cardtopia-nft.dev.morpheuslabs.io"></meta><meta name="article:publisher" content="https://dev-cardtopia-nft.dev.morpheuslabs.io"></meta><meta property="og:locale" content="en_US"></meta><meta property="og:type" content="website"></meta><meta property="og:url" content="https://dev-cardtopia-nft.dev.morpheuslabs.io"></meta><meta property="og:site_name" content="dev-cardtopia-nft"></meta><meta property="og:title" content="dev-cardtopia-nft"></meta><meta property="og:description" content="Collectopia Platform"></meta><meta property="og:image" content="https://ml-webstudio-dev.s3.ap-southeast-1.amazonaws.com/morpheuslabs/ml-banner.png"></meta><meta property="twitter:card" content="summary_large_image"></meta><meta property="twitter:title" content="dev-cardtopia-nft"></meta><meta property="twitter:url" content="https://dev-cardtopia-nft.dev.morpheuslabs.io"></meta><meta property="twitter:description" content="Collectopia Platform"></meta><meta property="twitter:image" content="https://ml-webstudio-dev.s3.ap-southeast-1.amazonaws.com/morpheuslabs/ml-banner.png"></meta><meta property="twitter:creator" content="https://dev-cardtopia-nft.dev.morpheuslabs.io"></meta>
        <title>Collectopia Platform</title>
        <link rel="icon" sizes="192x192" href="">
        <link rel="shortcut icon" href="https://ml-webstudio-dev.s3.ap-southeast-1.amazonaws.com/morpheuslabs/favicon.png" type="image/png">
        <link rel="apple-touch-icon" href="https://ml-webstudio-dev.s3.ap-southeast-1.amazonaws.com/morpheuslabs/favicon.png" type="image/png">
    
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
			      <link rel="stylesheet" href="https://webstudio.morpheuslabs.io/sdk/qrscanner.css?v=1">
			      <link rel="stylesheet" href="https://webstudio.morpheuslabs.io/fonts/font.css?v=1">
            <link rel="stylesheet" href="https://fonts.cdnfonts.com/css/strasua" /><link rel="stylesheet" href="https://fonts.cdnfonts.com/css/good-times-2" /><link rel="stylesheet" href="https://fonts.cdnfonts.com/css/pirulen" /><link rel="stylesheet" href="https://fonts.cdnfonts.com/css/open-sans" /><link rel="stylesheet" href="https://fonts.cdnfonts.com/css/montserrat" /><link rel="stylesheet" href="https://fonts.cdnfonts.com/css/abril-fatface" />
            <script src="https://cdn.tailwindcss.com"></script>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/web3@4.8.0/dist/web3.min.js"></script>
            <script src="https://unpkg.com/web3modal@1.9.3/dist/index.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
            <script src="https://unpkg.com/@walletconnect/web3-provider@1.6.6/dist/umd/index.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/bignumber.js/9.1.2/bignumber.min.js" integrity="sha512-9JMv6qShmz4L6iAvMaEoIaFtS4XGSk/jeTSR2vzieg0XS5njYvBvYk0YcvI59dLN/0B+QnG5HfGR+Mqubl78SA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
            <script src="https://cdn.jsdelivr.net/npm/webstudio-sdk@1.0.14/dist/main.min.js"></script>
            <script>
              
class AppContract {
  web3 = null;

  constructor(props) {
    this.contract = props.contract;
    this.metadata = props.metadata;
    this.account = localStorage.getItem('walletAddress');

    if (window.ethereum) {
      this.web3 = new Web3(window.ethereum);
    };
  }

  getContract() {
    return this.contractInstance();
  }

  getMetadata() {
    return this.metadata;
  }

  setAccount(address) {
    this.account = address;
  }

  getAccount() {
    return localStorage.getItem('walletAddress');
  }

  contractInstance() {
    let contractABI = JSON.parse(this.contract.abi);
    if (!contractABI || !this.contract.address) return;

    return new this.web3.eth.Contract(contractABI, this.contract.address);
  }

  convertBigNumber(bigNumber, decimal = 18) {
    if (!bigNumber) return 0;

    if (bigNumber._isBigNumber) {
      return bigNumber.div(new window.BigNumber(10).pow(decimal).toString()).toNumber();
    }

    let number = new window.BigNumber(bigNumber);

    return number.div(new window.BigNumber(10).pow(decimal).toString()).toNumber();
  }

  getExplorerLink(txHash = '') {
    let networkScans = {
      '1': 'https://etherscan.io',
      '56': 'https://bscscan.com',
      '137': 'https://polygonscan.com',
      '11155111': 'https://sepolia.etherscan.io',
      '97': 'https://testnet.bscscan.com',
      '80002': 'https://amoy.polygonscan.com',
    }

    return networkScans[this.contract.network] + '/tx/' + txHash;
  }
}

window.AppContract = AppContract;
;
              
class AppAPIModule {
  constructor(props) {
    this.api = JSON.parse(props.api || '""');
  }

  getAPI() {
    return this.api;
  }
}

window.AppAPIModule = AppAPIModule;
;
              
              
            </script>
            <style>
                html {
                    scroll-behavior: smooth;
                }
                * { box-sizing: border-box; } body {margin: 0;}html{scroll-behavior:smooth;}*{box-sizing:border-box;}body{margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;overflow-x:auto !important;overflow-y:auto !important;}html, body{font-family:Poppins, sans-serif;font-weight:400;}span + span{padding-left:0.23em;}.modal-container{background-image:linear-gradient(to right, rgb(28, 28, 28) 0%, rgb(79, 76, 60) 50%, rgb(28, 28, 28) 100%);width:100%;height:100%;}.max-w-1468{max-width:1468px;}.modal-content{font-size:32px;border-top-left-radius:14px;border-top-right-radius:14px;border-bottom-right-radius:14px;border-bottom-left-radius:14px;padding-top:48px;padding-right:48px;padding-bottom:48px;padding-left:48px;}.wallet-list li{letter-spacing:0.25px;background-image:initial;background-position-x:initial;background-position-y:initial;background-size:initial;background-repeat:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:rgb(76, 76, 76);border-top-left-radius:999px;border-top-right-radius:999px;border-bottom-right-radius:999px;border-bottom-left-radius:999px;border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-left-width:1px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:transparent;border-right-color:transparent;border-bottom-color:transparent;border-left-color:transparent;border-image-source:initial;border-image-slice:initial;border-image-width:initial;border-image-outset:initial;border-image-repeat:initial;font-weight:bold;}.wallet-list li.active, .wallet-list li:hover{background-image:linear-gradient(95.5deg, rgb(249, 239, 172) 15.09%, rgb(180, 144, 101) 96.77%);box-shadow:rgb(243, 232, 172) 0px 0px 20px 0px;border-top-color:rgba(255, 255, 255, 0.15);border-right-color:rgba(255, 255, 255, 0.15);border-bottom-color:rgba(255, 255, 255, 0.15);border-left-color:rgba(255, 255, 255, 0.15);color:rgb(37, 37, 37);}#modal-payment .product-image-box{width:172px;height:129px;}#cardCvc, #modal-payment input{border-top-width:1.2px;border-right-width:1.2px;border-bottom-width:1.2px;border-left-width:1.2px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:rgb(59, 59, 70);border-right-color:rgb(59, 59, 70);border-bottom-color:rgb(59, 59, 70);border-left-color:rgb(59, 59, 70);border-image-source:initial;border-image-slice:initial;border-image-width:initial;border-image-outset:initial;border-image-repeat:initial;height:42px;}.gradient-button{background-image:linear-gradient(95.5deg, rgb(255, 97, 87) 15.09%, rgb(209, 50, 50) 96.77%);box-shadow:rgb(251, 102, 100) 0px 0px 20px 0px;}.gradient-button:disabled{filter:grayscale();}#modal-detail .modal-container{max-width:886px;}.border-ffffff26{border-top-color:rgba(255, 255, 255, 0.15);border-right-color:rgba(255, 255, 255, 0.15);border-bottom-color:rgba(255, 255, 255, 0.15);border-left-color:rgba(255, 255, 255, 0.15);}#modal-detail .product-image-box{width:290px;}#modal-detail .description p{margin-bottom:32px;}#modal-payment-success .modal-container{max-width:768px;}#modal-payment-success .product-image-box{width:172px;height:129px;}#modal-payment-success .product-info-box{max-width:274px;}.border-d9d9d9{border-top-color:rgb(217, 217, 217);border-right-color:rgb(217, 217, 217);border-bottom-color:rgb(217, 217, 217);border-left-color:rgb(217, 217, 217);}#modal-payment-failed .modal-container{max-width:500px;max-height:350px;}.text-dc3e3c{color:rgb(220, 62, 60);}.bg-f99e9d1a{background-color:rgba(249, 158, 157, 0.1);}.tracking-004{letter-spacing:0.04em;}.h-42{height:42px;}.p-0-5{padding-top:0.125rem;padding-right:0.125rem;padding-bottom:0.125rem;padding-left:0.125rem;}.p-2-5{padding-top:0.625rem;padding-right:0.625rem;padding-bottom:0.625rem;padding-left:0.625rem;}.py-2-5{padding-top:0.625rem;padding-bottom:0.625rem;}.px-3-5{padding-left:0.875rem;padding-right:0.875rem;}.active .group-active-block{display:block;}.detail-modal-info .active{color:rgb(255, 255, 255);}.table-history thead th{padding-top:10px;padding-right:24px;padding-bottom:10px;padding-left:24px;text-align:left;}.table-history tbody td{padding-top:30px;padding-right:24px;padding-bottom:30px;padding-left:24px;background-color:rgb(36, 36, 36);}.table-history tbody td:first-of-type{border-top-left-radius:8px;border-top-right-radius:0px;border-bottom-right-radius:0px;border-bottom-left-radius:8px;}.table-history tbody td:last-of-type{border-top-left-radius:0px;border-top-right-radius:8px;border-bottom-right-radius:8px;border-bottom-left-radius:0px;}.preview-td img{border-top-left-radius:10px;border-top-right-radius:10px;border-bottom-right-radius:10px;border-bottom-left-radius:10px;}.pagination .active{background-color:rgb(255, 255, 255);color:rgb(28, 28, 28);}.left-2-5{left:0.625rem;}.right-2-5{right:0.625rem;}.card-container{background-image:linear-gradient(90deg, rgba(28, 28, 28, 0.4), rgba(79, 76, 60, 0.4), rgba(28, 28, 28, 0.4));background-position-x:initial;background-position-y:initial;background-size:initial;background-repeat:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:initial;position:relative;overflow-x:hidden;overflow-y:hidden;}.card-container::after{content:"";position:absolute;top:0px;left:0px;width:100%;height:100%;background-image:url("https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_NFT-detail-bg.png");background-size:100%;background-position-x:center;background-position-y:top;background-repeat:no-repeat;pointer-events:none;overflow-x:hidden;overflow-y:hidden;z-index:1;}.card-container-small{background-image:linear-gradient(90deg, rgba(28, 28, 28, 0.4), rgba(79, 76, 60, 0.4), rgba(28, 28, 28, 0.4));background-position-x:initial;background-position-y:initial;background-size:initial;background-repeat:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:initial;position:relative;overflow-x:hidden;overflow-y:hidden;}.card-container-small::after{content:"";position:absolute;top:0px;left:0px;width:100%;height:100%;background-image:url("https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_bg-card-small.png");background-size:100%;background-position-x:center;background-position-y:top;background-repeat:no-repeat;pointer-events:none;overflow-x:hidden;overflow-y:hidden;z-index:1;}#home-submit-card-modal .card-container{max-width:850px;}#home-submit-card-store-modal .card-container{max-width:675px;}#home-submit-card-form-modal .card-container{max-width:850px;}#home-payment-crypto-modal .card-container{max-width:740px;}#home-payment-credit-card-modal .card-container{max-width:740px;}#home-payment-success-modal .card-container{max-width:810px;}#home-modal-connect .card-container-small{max-width:455px;}#home-KYC-modal .card-container{max-width:761px;}#home-kyc-failed .card-container-small{max-width:420px;}#blindbox-submit-card-modal .card-container{max-width:850px;}#blindbox-submit-card-form-modal .card-container{max-width:850px;}#blindbox-submit-card-store-modal .card-container{max-width:675px;}#blindbox-payment-crypto-modal .card-container{max-width:740px;}#blindbox-payment-credit-card-modal .card-container{max-width:740px;}#blindbox-payment-success-modal .card-container{max-width:810px;}#blindbox-modal-connect .card-container-small{max-width:455px;}#blindbox-KYC-modal .card-container{max-width:761px;}#blindbox-kyc-failed .card-container-small{max-width:420px;}#trx-history-submit-card-modal .card-container{max-width:850px;}#trx-history-submit-card-form-modal .card-container{max-width:850px;}#trx-history-payment-crypto-modal .card-container{max-width:740px;}#trx-history-payment-credit-card-modal .card-container{max-width:740px;}#trx-history-payment-success-modal .card-container{max-width:810px;}#trx-history-modal-connect .card-container-small{max-width:455px;}#trx-history-KYC-modal .card-container{max-width:761px;}#trx-history-kyc-failed .card-container-small{max-width:420px;}#blindbox-detail-submit-card-modal .card-container{max-width:850px;}#blindbox-detail-submit-card-form-modal .card-container{max-width:850px;}#blindbox-detail-payment-crypto-modal .card-container{max-width:740px;}#blindbox-detail-payment-credit-card-modal .card-container{max-width:740px;}#blindbox-detail-payment-success-modal .card-container{max-width:810px;}#blindbox-detail-submit-card-store-modal .card-container{max-width:675px;}#trx-history-submit-card-store-modal .card-container{max-width:675px;}#nft-detail-submit-card-store-modal .card-container{max-width:675px;}#blindbox-detail-modal-connect .card-container-small{max-width:455px;}#deliver-card .card-container{max-width:761px;}#blindbox-detail-KYC-modal .card-container{max-width:761px;}#blindbox-detail-kyc-failed .card-container-small{max-width:420px;}#nft-detail-submit-card-modal .card-container{max-width:850px;}#nft-detail-submit-card-form-modal .card-container{max-width:850px;}#nft-detail-payment-crypto-modal .card-container{max-width:740px;}#nft-detail-payment-credit-card-modal .card-container{max-width:740px;}#nft-detail-make-offer-modal .card-container{max-width:680px;}#nft-make-offer-success-modal .card-container{max-width:680px;}#home-generate-shipping-label-success-modal .card-container{max-width:600px;}#nft-detail-generate-shipping-label-success-modal .card-container{max-width:600px;}#blindbox-generate-shipping-label-success-modal .card-container{max-width:600px;}#blindbox-detail-generate-shipping-label-success-modal .card-container{max-width:600px;}#trx-history-generate-shipping-label-success-modal .card-container{max-width:600px;}#nft-detail-payment-success-modal .card-container{max-width:810px;}#modal-nft-detail-payment-failed .card-container-small{max-width:455px;}#filter-modal .card-container-small{max-width:455px;}#nft-detail-modal-connect .card-container-small{max-width:455px;}#nft-detail-KYC-modal .card-container{max-width:761px;}#nft-detail-kyc-failed .card-container-small{max-width:420px;}.submit-card-button{background-image:linear-gradient(135deg, rgb(249, 239, 172), rgb(180, 144, 101));background-position-x:initial;background-position-y:initial;background-size:initial;background-repeat:initial;background-attachment:initial;background-origin:initial;background-clip:initial;background-color:initial;box-shadow:rgb(243, 232, 172) 0px 0px 20px 0px;}.text-blindbox-header{background-image:linear-gradient(90deg, rgb(255, 190, 190), rgb(255, 227, 46));background-position-x:initial;background-position-y:initial;background-size:initial;background-repeat:initial;background-attachment:initial;background-origin:initial;background-color:initial;background-clip:text;-webkit-text-fill-color:transparent;}.text-drawn-blindbox{background-image:linear-gradient(90deg, rgb(255, 190, 190), rgb(255, 227, 46));background-position-x:initial;background-position-y:initial;background-size:initial;background-repeat:initial;background-attachment:initial;background-origin:initial;background-color:initial;background-clip:text;-webkit-text-fill-color:transparent;}.text-drawn-blindbox-header{background-image:linear-gradient(rgb(255, 255, 255), rgb(243, 234, 164));background-position-x:initial;background-position-y:initial;background-size:initial;background-repeat:initial;background-attachment:initial;background-origin:initial;background-color:initial;background-clip:text;-webkit-text-fill-color:transparent;}.table > thead > tr{color:rgba(241, 245, 250, 0.6);}li::marker{font-size:14px !important;}li{line-height:1.25rem !important;}.border-input{border-top-color:rgba(255, 255, 255, 0.43);border-right-color:rgba(255, 255, 255, 0.43);border-bottom-color:rgba(255, 255, 255, 0.43);border-left-color:rgba(255, 255, 255, 0.43);}.home-header-bg{background-image:url("https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_background.png");background-position-x:center;background-position-y:top;background-size:cover;}.blindbox-detail-image{background-image:url("https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_bilndBox4.svg");width:min(400px, 70vw);aspect-ratio:1 / 1;z-index:2;background-size:cover;background-position-x:center;background-position-y:center;background-repeat:no-repeat;}.leading-32px{line-height:32px !important;}.menu-mobile-button{background-color:rgb(255, 255, 255);border-top-left-radius:10px;border-top-right-radius:10px;border-bottom-right-radius:10px;border-bottom-left-radius:10px;border-top-width:1px;border-right-width:1px;border-bottom-width:1px;border-left-width:1px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:rgb(255, 255, 255);border-right-color:rgb(255, 255, 255);border-bottom-color:rgb(255, 255, 255);border-left-color:rgb(255, 255, 255);border-image-source:initial;border-image-slice:initial;border-image-width:initial;border-image-outset:initial;border-image-repeat:initial;}.mobile-menu-side{width:80vw;max-width:300px;height:100vh;background-color:rgb(28, 28, 28);position:fixed;top:0px;right:0px;z-index:50;border-left-width:1px;border-left-style:solid;border-left-color:rgba(255, 255, 255, 0.27);padding-top:10px;padding-right:16px;padding-bottom:10px;padding-left:16px;transition-behavior:normal;transition-duration:0.3s;transition-timing-function:ease-in-out;transition-delay:0s;transition-property:all;transform:translateX(100%);}.mobile-menu-side.show{transform:translateX(0px);}.menu-mobile-list{height:calc(-150px + 100vh);}.radio-active label{color:rgb(37, 37, 37);}.active-btn{background-color:rgb(255, 255, 255) !important;border-top-color:rgba(255, 255, 255, 0.15) !important;border-right-color:rgba(255, 255, 255, 0.15) !important;border-bottom-color:rgba(255, 255, 255, 0.15) !important;border-left-color:rgba(255, 255, 255, 0.15) !important;color:rgb(37, 37, 37) !important;}.drawn-blindbox-image{background-image:url("https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_NFTdetail.svg");background-size:cover;background-position-x:center;background-position-y:center;}input[type="checkbox"]{background-color:transparent;accent-color:rgb(0, 0, 0);border-top-width:2px;border-right-width:2px;border-bottom-width:2px;border-left-width:2px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:rgb(255, 255, 255);border-right-color:rgb(255, 255, 255);border-bottom-color:rgb(255, 255, 255);border-left-color:rgb(255, 255, 255);border-image-source:initial;border-image-slice:initial;border-image-width:initial;border-image-outset:initial;border-image-repeat:initial;width:20px;height:20px;}input[type="radio"]{background-color:transparent;accent-color:rgb(0, 0, 0);border-top-width:2px;border-right-width:2px;border-bottom-width:2px;border-left-width:2px;border-top-style:solid;border-right-style:solid;border-bottom-style:solid;border-left-style:solid;border-top-color:rgb(255, 255, 255);border-right-color:rgb(255, 255, 255);border-bottom-color:rgb(255, 255, 255);border-left-color:rgb(255, 255, 255);border-image-source:initial;border-image-slice:initial;border-image-width:initial;border-image-outset:initial;border-image-repeat:initial;width:20px;height:20px;}@media (max-width: 1024px){.active .max-lg-group-active-block{display:block;}}
            </style>
            
          </head>
          <body id="iv28i3"><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"/><link rel="stylesheet" href="index.css"/><div class="bg-[#1c1c1c] min-h-screen pb-10 px-3-5 lg:px-0"><header class="home-header-bg w-full h-auto md:min-h-100vh-380 min-h-auto relative flex justify-center items-center flex-col lg:pb--60px-"><div id="header-container-4" class="w-full mt-6 left-2-5 right-2-5 lg:left-auto lg:right-auto lg:top-0 xl:top-12 lg:w-5/6 max-w-1822 px-4 lg:px-8 py-3 bg-white bg-opacity-10 rounded-lg shadow-lg mx-auto justify-between flex items-center gap-2"><a href="/" class="w-max lg:hidden md:block xl:block"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctg_logo.svg" id="i0p37u3" class="h-12 w-auto mx-auto"/></a><div class="hidden lg:flex items-center"><a href="/" class="font-bold text-base text-white/70 hover:text-white px-4 border-r border-white/20">
              Home
            </a><a href="/" class="font-bold text-base text-white/70 hover:text-white px-4 border-r border-white/20">
              Marketplace
            </a><a href="/blindboxlist.html" class="font-bold text-base px-4"><span class="px-4 bg-[#4e4c3d] py-2 rounded-lg border-dashed border-2 border-[#b49065]"><span id="isfupe4" class="text-blindbox-header"> Blind Box </span></span></a><a href="/transactionhistory.html" class="font-bold text-base text-white/70 hover:text-white px-4 border-l border-white/20">
              Profiles
            </a></div><div class="hidden lg:flex justify-end items-center gap-2"><button id="blindbox-detail-submit-card" class="submit-card-button px-4 lg:px-8 h-9 lg:h-11 flex min-w-[150px] rounded-full items-center justify-center border border-white/15 font-bold text-base text-[#2A2A2A]">
              Submit Card
            </button><button id="blindbox-detail-login" class="px-4 lg:px-8 h-9 lg:h-11 flex min-w-36 rounded-full items-center justify-center bg-white border border-ffffff26 font-bold text-base text-[#2A2A2A]">
              Login
            </button><button id="blindbox-detail-userAdress" class="hidden px-4 lg:px-6 h-9 lg:h-11 w-[144px] rounded-full items-center justify-center bg-white border border-ffffff26 font-bold text-base text-[#2A2A2A]"></button></div><div class="block lg:hidden"><button id="blindbox-detail-menu-button" class="px-2 h-8 rounded-sm items-center justify-center menu-mobile-button"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/menu.svg" id="i9dcgkw" class="w-6 h-6 max-w-6 max-h-6"/></button></div><div id="blindbox-detail-menu-side" class="mobile-menu-side"><button id="blindbox-detail-menu-close" class="inline-flex items-center"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_closeModal.svg" id="i0vluqv"/></button><div class="h-full"><a href="/" class="w-full block"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctg_logo.svg" id="ibabknw" class="h-12 w-auto mx-auto"/></a><div class="menu-mobile-list mt-8 flex flex-col gap-6 items-center"><div class="flex h-full flex-col gap-6 items-center"><a href="/" class="font-bold text-base text-white/70 hover:text-white px-4">
                    Home
                  </a><a href="/" class="font-bold text-base text-white/70 hover:text-white px-4">
                    Marketplace
                  </a><a href="/blindboxlist.html" class="font-bold text-base px-4"><span class="px-4 py-2 rounded-lg bg-4e4c3d border-dashed border-2 border-[#b49065]"><span id="i9mxegg" class="text-blindbox-header">Blind Box</span></span></a><a href="/transactionhistory.html" class="font-bold text-base text-white/70 hover:text-white px-4">
                    Profiles
                  </a></div><div class="flex flex-col gap-3 items-center w-full"><button id="blindbox-detail-mobile-submit-card" class="submit-card-button px-4 lg:px-8 h-9 lg:h-11 w-full flex rounded-full items-center justify-center border border-white/15 font-bold text-base text-[#2A2A2A]">
                    Submit Card
                  </button><button id="blindbox-detail-mobile-login" class="px-4 lg:px-8 h-9 lg:h-11 w-full flex min-w-36 rounded-full items-center justify-center bg-white border border-ffffff26 font-bold text-base text-[#2A2A2A]">
                    Login
                  </button><button id="blindbox-detail-mobile-userAdress" class="hidden px-4 lg:px-8 h-9 lg:h-11 min-w-36 rounded-full items-center justify-center bg-white border border-ffffff26 font-bold text-base text-[#2A2A2A]"></button></div></div></div></div></div><div id="nft-blindbox-detail-detail" class="mt-24"><div class="card-container-small min-h-[675px] h-full md:w-738px lg:min-w-738px mx-auto bg-white/5 rounded-3xl sm:p-12 p-4"><div class="h-full w-full text-white pb-3"><h2 id="i58c7mi" class="text-drawn-blindbox-header text-center text-3xl md:text-5xl lg:text-6xl">
                Draw your Blind Box
              </h2><div class="w-full h-full flex justify-center items-center mt-12"><div id="blindBoxImage" class="relative blindbox-detail-image"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_collectopiaCard.svg" id="idau5av" class="absolute object-cover z-1 hidden md:block bottom-[-30px] right-[-75px]"/><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_collectopiaCardLight.svg" id="inkmmz1" class="absolute object-cover z-1 top-[-30px] left-[-30px] hidden md:block"/></div></div></div><div class="pt-8 flex justify-center items-center"><div id="igttlr7" class="text-drawn-blindbox text-2xl font-bold inline-block mx-auto">
                87 / 99 Drawn
              </div></div><div class="pt-8 flex justify-between items-center"><div id="ihw1svh" class="text-2xl md:text-4xl font-thin text-white">Price</div><div class="text-2xl md:text-4xl font-bold text-white flex items-center gap-2">
                0.0009 ETH
                <img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_eth_coin_big.png" id="ix30sol"/></div></div><div class="pt-8"><div id="icqkjca" class="text-sm font-thin text-white">
                Select your preferred method:
              </div><div class="flex lg:justify-start justify-between items-center gap-2 mt-4 sm:flex-row flex-col"><button id="draw-blind-crypto-btn" class="active-btn px-4 lg:px-8 h-9 lg:h-11 flex min-w-52 w-full rounded-full items-center justify-center font-bold text-base bg-[#4C4C4C] text-white">
                  Crypto
                </button><button id="draw-blind-credit-card-btn" class="px-4 lg:px-8 h-9 lg:h-11 flex min-w-52 w-full rounded-full items-center justify-center bg-[#4C4C4C] font-bold text-base text-white">
                  Credit Card
                </button></div></div><div id="draw-blind-crypto-container"><div class="pt-8"><div id="iz7c27h" class="text-sm font-thin text-white">Pay with:</div><div class="flex-1 sm:w-full lg:w--130px- bg-white border border-d9d9d9 rounded-full flex items-center justify-between gap-2 h-42 px-4 py-3 cursor-pointer my-2"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_eth_coin.png" id="ib1fs57"/><div id="i7yh4xn" class="font-bold text-base text-[#252525]">ETH</div><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_selectIcon.svg" id="ids906g"/></div><div id="iwq1cuj" class="text-sm text-white font-thin">
                  We currently support
                  <span id="iee0mr9" class="font-bold text-base">Ethereum (ERC20) network</span>
                  only
                </div></div></div><div id="draw-blind-credit-card-container" class="hidden"><div class="mt-6"><div class="flex gap-2"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_visa.svg" id="irfclg9" class="h-9"/><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_master-card.svg" id="icesgff" class="h-9"/><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_express-card.svg" id="in8lbiu" class="h-9"/><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_union-card.svg" id="ibffydd" class="h-9"/></div><div class="flex gap-4 mt-8 sm:flex-row flex-col w-full items-center"><div class="flex-1"><div><div id="i43pjua" class="font-thin text-xs text-white">
                        Card Number
                      </div><div id="cardNumber-2" class="bg-[#302E26] mt-2 border border-white/15 px-4 py-3 h-11 rounded-full text-base border-input"></div></div><div class="flex gap-4 mt-4"><div class="flex-1"><div id="i46azpf" class="font-thin text-xs text-white">
                          Expiry Date
                        </div><div id="cardExpiry-2" class="w-full bg-[#302E26] mt-2 border border-white/15 px-4 py-3 h-11 rounded-full text-base border-input"></div></div><div class="flex-1"><div id="iqc4wz4" class="font-thin text-xs text-white">CVC</div><div id="cardCvc-2" class="w-full bg-[#302E26] mt-2 border border-white/15 px-4 py-3 h-11 rounded-full text-base border-input"></div></div></div></div><div class="flex-1"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_stripe.svg" id="ij9a5yg" class="h-14"/></div></div></div></div><div class="pt-8"><button id="drawbox-now-btn" class="submit-card-button px-4 lg:px-8 h-9 lg:h-11 w-full flex min-w-[150px] rounded-full items-center justify-center border border-white/15 font-bold text-base text-[#2A2A2A]">
                Draw Now
              </button></div></div></div></header><section class="w-full max-w-1468 mx-auto mt-12 lg:px-4"></section><div id="ir26adh"><script>document.addEventListener("DOMContentLoaded", () => {
  const state = history.state;
  const nftId = localStorage.getItem("nftId");
});

window.addEventListener("popstate", function (event) {
  location.reload();
});

/** Home **/

function openLoginModal() {
  $("#home-modal-connect").removeClass("hidden");
  $("#mobile-menu-side").removeClass("show");
}

function closeLoginModal() {
  $("#home-modal-connect").addClass("hidden");
}

function openSubmitCardModal() {
  $("#home-submit-card-modal").removeClass("hidden");
  $("#mobile-menu-side").removeClass("show");
}

function closeSubmitCardModal() {
  $("#home-submit-card-modal").addClass("hidden");
}

function openSubmitCardFormModal() {
  closeSubmitCardModal();
  $("#home-submit-card-form-modal").removeClass("hidden");
}

function closeSubmitCardFormModal() {
  $("#home-submit-card-generate").attr("disabled", true);
  $("#home-submit-card-generate-loading").removeClass("hidden");

  setTimeout(() => {
    $("#home-submit-card-generate").attr("disabled", false);
    $("#home-submit-card-form-modal").addClass("hidden");
    $("#home-submit-card-generate-loading").addClass("hidden");
    openGenerateShippingLabelSuccessModal();
  }, 3000);
}

function closeSubmitCardFormModalClose() {
  $("#home-submit-card-form-modal").addClass("hidden");
}

function openGenerateShippingLabelSuccessModal() {
  $("#home-generate-shipping-label-success-modal").removeClass("hidden");
}

function closeGenerateShippingLabelSuccessModal() {
  $("#home-generate-shipping-label-success-modal").addClass("hidden");
}

function openSubmitCardStoreModalHome() {
  closeSubmitCardModal();
  $("#home-submit-card-store-modal").removeClass("hidden");
}

function closeSubmitCardStoreModalHome() {
  $("#home-submit-card-store-modal").addClass("hidden");
}

function openKYCModal() {
  closeLoginModal();
  $("#home-KYC-modal").removeClass("hidden");
}

function closeKYCModal() {
  $("#home-KYC-modal").addClass("hidden");
}

function openKYCFailedModal() {
  closeKYCModal();
  $("#home-kyc-failed").removeClass("hidden");
}
function closeKYCFailedModal() {
  $("#home-kyc-failed").addClass("hidden");
}

function openPaymentCryptoModal() {
  closePaymentCreditCardModal();
  $("#home-payment-crypto-modal").removeClass("hidden");
}
function closePaymentCryptoModal() {
  $("#home-payment-crypto-modal").addClass("hidden");
}

function openPaymentCreditCardModal() {
  closePaymentCryptoModal();
  document
    .getElementById("home-payment-credit-card-modal")
    .removeClass("hidden");
}
function closePaymentCreditCardModal() {
  $("#home-payment-credit-card-modal").addClass("hidden");
}

function closePaymentModal() {
  closePaymentCreditCardModal();
  closePaymentCryptoModal();
}

function closePaymentSuccessModal() {
  $("#home-payment-success-modal").addClass("hidden");
}

function openPaymentSuccessModal() {
  closePaymentModal();
  $("#home-payment-success-modal").removeClass("hidden");
}

/** NFT Detail **/

function nft_detail_openLoginModal() {
  $("#nft-detail-modal-connect").removeClass("hidden");
  $("#mobile-nft-detail-menu-side").removeClass("show");
}
function nft_detail_closeLoginModal() {
  $("#nft-detail-modal-connect").addClass("hidden");
}

function nft_detail_openSubmitCardModal() {
  $("#nft-detail-submit-card-modal").removeClass("hidden");
  $("#mobile-nft-detail-menu-side").removeClass("show");
}
function nft_detail_closeSubmitCardModal() {
  $("#nft-detail-submit-card-modal").addClass("hidden");
}

function nft_detail_openSubmitCardFormModal() {
  nft_detail_closeSubmitCardModal();
  $("#nft-detail-submit-card-form-modal").removeClass("hidden");
}
function nft_detail_closeSubmitCardFormModal() {
  $("#nft-detail-submit-card-form-modal").addClass("hidden");
}

function nft_detail_closeSubmitCardFormModalSuccess() {
  $("#nft-detail-submit-card-generate").attr("disabled", true);
  $("#nft-detail-submit-card-generate-loading").removeClass("hidden");

  setTimeout(() => {
    $("#nft-detail-submit-card-generate").attr("disabled", false);
    $("#nft-detail-submit-card-form-modal").addClass("hidden");
    $("#nft-detail-submit-card-generate-loading").addClass("hidden");
    $("#nft-detail-generate-shipping-label-success-modal").removeClass(
      "hidden"
    );
  }, 3000);
}

function closeGenSuccesModalNft() {
  $("#nft-detail-generate-shipping-label-success-modal").addClass("hidden");
}

function nft_detail_openKYCModal() {
  nft_detail_closeLoginModal();
  $("#nft-detail-KYC-modal").removeClass("hidden");
}
function nft_detail_closeKYCModal() {
  $("#nft-detail-KYC-modal").addClass("hidden");
}
function nft_detail_openKYCFailedModal() {
  nft_detail_closeKYCModal();
  $("#nft-detail-kyc-failed").removeClass("hidden");
}
function nft_detail_closeKYCFailedModal() {
  $("#nft-detail-kyc-failed").addClass("hidden");
}

function nft_detail_openPaymentCryptoModal() {
  $("#nft-detail-payment-credit-card-modal").addClass("hidden");
  $("#nft-detail-payment-crypto-modal").removeClass("hidden");
}
function nft_detail_closePaymentCryptoModal() {
  $("#nft-detail-payment-crypto-modal").addClass("hidden");
}

function nft_detail_closePaymentCreditCardModal() {
  $("#nft-detail-payment-credit-card-modal").addClass("hidden");
}

function nft_detail_closePaymentModal() {
  nft_detail_closePaymentCreditCardModal();
  nft_detail_closePaymentCryptoModal();
}

function nft_detail_closePaymentSuccessModal() {
  $("#nft-detail-payment-success-modal").addClass("hidden");
  history.back();
}

function nft_detail_openPaymentSuccessModal() {
  nft_detail_closePaymentModal();
  $("#nft-detail-payment-success-modal").removeClass("hidden");
}

function nft_detail_closeBack() {
  history.back();
}

function nft_detail_openSubmitCardStoreModal() {
  nft_detail_closeSubmitCardModal();
  $("#nft-detail-submit-card-store-modal").removeClass("hidden");
}

function nft_detail_closeSubmitCardStoreModal() {
  $("#nft-detail-submit-card-store-modal").addClass("hidden");
}

/** blindbox **/
function openBlindBox(id) {
  history.pushState({ id }, "", `/drawnblindbox.html`);
  localStorage.setItem("blindBoxId", id);
  window.location.href = `/drawnblindbox.html`;
}
function openSubmitCardStoreModal() {
  blindbox_closeSubmitCardModal();
  $("#blindbox-submit-card-store-modal").removeClass("hidden");
}

function closeSubmitCardStoreModal() {
  $("#blindbox-submit-card-store-modal").addClass("hidden");
}

function blindbox_openLoginModal() {
  $("#blindbox-modal-connect").removeClass("hidden");
  $("#blindbox-menu-side").removeClass("show");
}

function blindbox_closeLoginModal() {
  $("#blindbox-modal-connect").addClass("hidden");
}

function blindbox_openSubmitCardModal() {
  $("#blindbox-submit-card-modal").removeClass("hidden");
  $("#blindbox-menu-side").removeClass("show");
}

function blindbox_closeSubmitCardModal() {
  $("#blindbox-submit-card-modal").addClass("hidden");
}

function blindbox_openSubmitCardFormModal() {
  blindbox_closeSubmitCardModal();
  $("#blindbox-submit-card-form-modal").removeClass("hidden");
}

function blindbox_closeSubmitCardFormModal() {
  $("#blindbox-submit-card-form-modal").addClass("hidden");
}

function blindbox_closeSubmitCardFormModalSuccess() {
  $("#blindbox-submit-card-generate").attr("disabled", true);
  $("#blindbox-submit-card-generate-loading").removeClass("hidden");

  setTimeout(() => {
    $("#blindbox-submit-card-generate").attr("disabled", false);
    $("#blindbox-submit-card-form-modal").addClass("hidden");
    $("#blindbox-submit-card-generate-loading").addClass("hidden");
    $("#blindbox-generate-shipping-label-success-modal").removeClass("hidden");
  }, 3000);
}

function closeGenSuccesModalBlindbox() {
  $("#blindbox-generate-shipping-label-success-modal").addClass("hidden");
}

function blindbox_openKYCModal() {
  blindbox_closeLoginModal();
  $("#blindbox-KYC-modal").removeClass("hidden");
}

function blindbox_closeKYCModal() {
  $("#blindbox-KYC-modal").addClass("hidden");
}

function blindbox_openKYCFailedModal() {
  blindbox_closeKYCModal();
  $("#blindbox-kyc-failed").removeClass("hidden");
}
function blindbox_closeKYCFailedModal() {
  $("#blindbox-kyc-failed").addClass("hidden");
}

function blindbox_openPaymentCryptoModal() {
  blindbox_closePaymentCreditCardModal();
  $("#blindbox-payment-crypto-modal").removeClass("hidden");
}
function blindbox_closePaymentCryptoModal() {
  $("#blindbox-payment-crypto-modal").addClass("hidden");
}

function blindbox_openPaymentCreditCardModal() {
  blindbox_closePaymentCryptoModal();
  document
    .getElementById("blindbox-payment-credit-card-modal")
    .removeClass("hidden");
}
function blindbox_closePaymentCreditCardModal() {
  $("#blindbox-payment-credit-card-modal").addClass("hidden");
}

function blindbox_closePaymentModal() {
  blindbox_closePaymentCreditCardModal();
  blindbox_closePaymentCryptoModal();
}

function blindbox_closePaymentSuccessModal() {
  $("#blindbox-payment-success-modal").addClass("hidden");
}

function blindbox_openPaymentSuccessModal() {
  blindbox_closePaymentModal();
  $("#blindbox-payment-success-modal").removeClass("hidden");
}

/** blindbox detail **/

function blindbox_detail_openLoginModal() {
  $("#blindbox-detail-modal-connect").removeClass("hidden");
  $("#blindbox-detail-menu-side").removeClass("show");
}

function blindbox_detail_closeLoginModal() {
  $("#blindbox-detail-modal-connect").addClass("hidden");
}

function blindbox_detail_openSubmitCardModal() {
  $("#blindbox-detail-submit-card-modal").removeClass("hidden");
  $("#blindbox-detail-menu-side").removeClass("show");
}

function blindbox_detail_closeSubmitCardModal() {
  $("#blindbox-detail-submit-card-modal").addClass("hidden");
}

function blindbox_detail_openSubmitCardFormModal() {
  blindbox_detail_closeSubmitCardModal();
  $("#blindbox-detail-submit-card-form-modal").removeClass("hidden");
}

function blindbox_detail_closeSubmitCardFormModal() {
  $("#blindbox-detail-submit-card-form-modal").addClass("hidden");
}

function blindbox_detail_openSubmitCardStoreModal() {
  blindbox_detail_closeSubmitCardModal();
  $("#blindbox-detail-submit-card-store-modal").removeClass("hidden");
}

function blindbox_detail_openSubmitCardStoreModalSuccess() {
  $("#blindbox-detail-submit-card-generate").attr("disabled", true);
  $("#blindbox-detail-submit-card-generate-loading").removeClass("hidden");

  setTimeout(() => {
    $("#blindbox-detail-submit-card-generate").attr("disabled", false);
    $("#blindbox-detail-submit-card-form-modal").addClass("hidden");
    $("#blindbox-detail-submit-card-generate-loading").addClass("hidden");
    $("#blindbox-detail-generate-shipping-label-success-modal").removeClass(
      "hidden"
    );
  }, 3000);
}

function closeGenSuccesModalBlindboxDetail() {
  $("#blindbox-detail-generate-shipping-label-success-modal").addClass(
    "hidden"
  );
}

function blindbox_detail_closeSubmitCardStoreModal() {
  $("#blindbox-detail-submit-card-store-modal").addClass("hidden");
}

function blindbox_detail_openKYCModal() {
  blindbox_detail_closeLoginModal();
  $("#blindbox-detail-KYC-modal").removeClass("hidden");
}

function blindbox_detail_closeKYCModal() {
  $("#blindbox-detail-KYC-modal").addClass("hidden");
}

function blindbox_detail_openKYCFailedModal() {
  blindbox_detail_closeKYCModal();
  $("#blindbox-detail-kyc-failed").removeClass("hidden");
}
function blindbox_detail_closeKYCFailedModal() {
  $("#blindbox-detail-kyc-failed").addClass("hidden");
}

function blindbox_detail_openPaymentCryptoModal() {
  blindbox_detail_closePaymentCreditCardModal();
  $("#blindbox-detail-payment-crypto-modal").removeClass("hidden");
}
function blindbox_detail_closePaymentCryptoModal() {
  $("#blindbox-detail-payment-crypto-modal").addClass("hidden");
}

function blindbox_detail_openPaymentCreditCardModal() {
  blindbox_detail_closePaymentCryptoModal();
  document
    .getElementById("blindbox-detail-payment-credit-card-modal")
    .removeClass("hidden");
}
function blindbox_detail_closePaymentCreditCardModal() {
  $("#blindbox-detail-payment-credit-card-modal").addClass("hidden");
}

function blindbox_detail_closePaymentModal() {
  blindbox_detail_closePaymentCreditCardModal();
  blindbox_detail_closePaymentCryptoModal();
}

function blindbox_detail_closePaymentSuccessModal() {
  $("#blindbox-detail-payment-success-modal").addClass("hidden");
}

function blindbox_detail_openPaymentSuccessModal() {
  blindbox_detail_closePaymentModal();
  $("#blindbox-detail-payment-success-modal").removeClass("hidden");
}

/** Transaction History **/

function trx_history_openLoginModal() {
  $("#trx-history-modal-connect").removeClass("hidden");
  $("#transaction-history-menu-side").removeClass("show");
}

function trx_history_closeLoginModal() {
  $("#trx-history-modal-connect").addClass("hidden");
}

function trx_history_openSubmitCardModal() {
  $("#trx-history-submit-card-modal").removeClass("hidden");
  $("#transaction-history-menu-side").removeClass("show");
}

function trx_history_closeSubmitCardModal() {
  $("#trx-history-submit-card-modal").addClass("hidden");
}

function trx_history_openSubmitCardFormModal() {
  trx_history_closeSubmitCardModal();
  $("#trx-history-submit-card-form-modal").removeClass("hidden");
}

function trx_history_closeSubmitCardFormModal() {
  $("#trx-history-submit-card-form-modal").addClass("hidden");
}

function trx_history_closeSubmitCardFormModalSuccess() {
  $("#trx-history-submit-card-generate").attr("disabled", true);
  $("#trx-history-submit-card-generate-loading").removeClass("hidden");

  setTimeout(() => {
    $("#trx-history-submit-card-generate").attr("disabled", false);
    $("#trx-history-submit-card-form-modal").addClass("hidden");
    $("#trx-history-submit-card-generate-loading").addClass("hidden");
    $("#trx-history-generate-shipping-label-success-modal").removeClass(
      "hidden"
    );
  }, 3000);
}

function closeGenSuccesModalTrxHistory() {
  $("#trx-history-generate-shipping-label-success-modal").addClass("hidden");
}

function trx_history_openKYCModal() {
  trx_history_closeLoginModal();
  $("#trx-history-KYC-modal").removeClass("hidden");
}

function trx_history_closeKYCModal() {
  $("#trx-history-KYC-modal").addClass("hidden");
}

function trx_history_openKYCFailedModal() {
  trx_history_closeKYCModal();
  $("#trx-history-kyc-failed").removeClass("hidden");
}
function trx_history_closeKYCFailedModal() {
  $("#trx-history-kyc-failed").addClass("hidden");
}

function trx_history_openPaymentCryptoModal() {
  trx_history_closePaymentCreditCardModal();
  $("#trx-history-payment-crypto-modal").removeClass("hidden");
}
function trx_history_closePaymentCryptoModal() {
  $("#trx-history-payment-crypto-modal").addClass("hidden");
}

function trx_history_openPaymentCreditCardModal() {
  trx_history_closePaymentCryptoModal();
  document
    .getElementById("trx-history-payment-credit-card-modal")
    .removeClass("hidden");
}
function trx_history_closePaymentCreditCardModal() {
  $("#trx-history-payment-credit-card-modal").addClass("hidden");
}

function trx_history_closePaymentModal() {
  trx_history_closePaymentCreditCardModal();
  trx_history_closePaymentCryptoModal();
}

function trx_history_closePaymentSuccessModal() {
  $("#trx-history-payment-success-modal").addClass("hidden");
}

function trx_history_openPaymentSuccessModal() {
  trx_history_closePaymentModal();
  $("#trx-history-payment-success-modal").removeClass("hidden");
}

function trx_history_openSubmitCardStoreModal() {
  trx_history_closeSubmitCardModal();
  $("#trx-history-submit-card-store-modal").removeClass("hidden");
}

function trx_history_closeSubmitCardStoreModal() {
  $("#trx-history-submit-card-store-modal").addClass("hidden");
}

window.addEventListener("DOMContentLoaded", () => {
  //home
  $("#home-submit-card").on("click", openSubmitCardModal);
  $("#home-login").on("click", openLoginModal);
  $("#home-mobile-submit-card").on("click", openSubmitCardModal);
  $("#home-mobile-login").on("click", openLoginModal);
  $("#home-close-connect").on("click", closeLoginModal);
  $("#home-close-KYC").on("click", closeKYCModal);
  $("#home-KYC-cancel").on("click", closeKYCModal);
  $("#home-KYC-confirm").on("click", openKYCFailedModal);
  $("#home-close-submit-card").on("click", closeSubmitCardModal);
  $("#home-close-kyc-failed").on("click", closeKYCFailedModal);
  $("#home-submit-card-start").on("click", openSubmitCardFormModal);
  $("#home-close-submit-card-form").on("click", closeSubmitCardFormModalClose);
  $("#home-submit-card-generate").on("click", closeSubmitCardFormModal);
  $("#home-generate-shipping-label-success-close").on(
    "click",
    closeGenerateShippingLabelSuccessModal
  );
  $("#home-submit-card-store").on("click", openSubmitCardStoreModalHome);
  $("#home-submit-card-store-appointment").on(
    "click",
    closeSubmitCardStoreModalHome
  );

  //blindbox
  $("#blindbox-submit-card").on("click", blindbox_openSubmitCardModal);
  $("#blindbox-login").on("click", blindbox_openLoginModal);
  $("#blindBox-mobile-submit-card").on("click", blindbox_openSubmitCardModal);
  $("#blindBox-mobile-login").on("click", blindbox_openLoginModal);
  $("#blindbox-close-connect").on("click", blindbox_closeLoginModal);
  $("#blindbox-close-KYC").on("click", blindbox_closeKYCModal);
  $("#blindbox-KYC-cancel").on("click", blindbox_closeKYCModal);
  $("#blindbox-KYC-confirm").on("click", blindbox_openKYCFailedModal);
  $("#blindbox-close-submit-card").on("click", blindbox_closeSubmitCardModal);
  $("#blindbox-close-kyc-failed").on("click", blindbox_closeKYCFailedModal);
  $("#blindbox-submit-card-start").on(
    "click",
    blindbox_openSubmitCardFormModal
  );
  $("#blindbox-close-submit-card-form").on(
    "click",
    blindbox_closeSubmitCardFormModal
  );
  $("#blindbox-submit-card-generate").on(
    "click",
    blindbox_closeSubmitCardFormModalSuccess
  );
  $("#blindbox-generate-shipping-label-success-close").on(
    "click",
    closeGenSuccesModalBlindbox
  );

  $("#blindbox-draw-1").on("click", () => openBlindBox("1"));
  $("#blindbox-draw-2").on("click", () => openBlindBox("2"));
  $("#blindbox-draw-3").on("click", () => openBlindBox("3"));
  $("#blindbox-draw-4").on("click", () => openBlindBox("4"));
  $("#blindbox-draw-5").on("click", () => openBlindBox("5"));
  $("#blindbox-draw-6").on("click", () => openBlindBox("6"));
  $("#blindbox-draw-7").on("click", () => openBlindBox("7"));
  $("#blindbox-draw-8").on("click", () => openBlindBox("8"));
  $("#blindbox-draw-9").on("click", () => openBlindBox("9"));
  $("#blindbox-draw-10").on("click", () => openBlindBox("10"));
  $("#blindbox-draw-11").on("click", () => openBlindBox("11"));
  $("#blindbox-draw-12").on("click", () => openBlindBox("12"));
  $("#blindbox-draw-13").on("click", () => openBlindBox("13"));
  $("#blindbox-draw-14").on("click", () => openBlindBox("14"));
  $("#blindbox-draw-15").on("click", () => openBlindBox("15"));
  $("#blindbox-draw-16").on("click", () => openBlindBox("16"));

  $("#blindbox-submit-card-store").on("click", openSubmitCardStoreModal);
  $("#blindbox-submit-card-store-appointment").on(
    "click",
    closeSubmitCardStoreModal
  );

  //blindbox detail

  $("#blindbox-detail-submit-card").on(
    "click",
    blindbox_detail_openSubmitCardModal
  );
  $("#blindbox-detail-login").on("click", blindbox_detail_openLoginModal);
  $("#blindbox-detail-mobile-submit-card").on(
    "click",
    blindbox_detail_openSubmitCardModal
  );
  $("#blindbox-detail-mobile-login").on(
    "click",
    blindbox_detail_openLoginModal
  );
  $("#blindbox-detail-close-connect").on(
    "click",
    blindbox_detail_closeLoginModal
  );
  $("#blindbox-detail-close-KYC").on("click", blindbox_detail_closeKYCModal);
  $("#blindbox-detail-KYC-cancel").on("click", blindbox_detail_closeKYCModal);
  $("#blindbox-detail-submit-card-store").on(
    "click",
    blindbox_detail_openSubmitCardStoreModal
  );
  $("#blindbox-detail-submit-card-store-appointment").on(
    "click",
    blindbox_detail_closeSubmitCardStoreModal
  );

  $("#blindbox-detail-KYC-confirm").on(
    "click",
    blindbox_detail_openKYCFailedModal
  );
  $("#blindbox-detail-close-submit-card").on(
    "click",
    blindbox_detail_closeSubmitCardModal
  );
  $("#blindbox-detail-close-kyc-failed").on(
    "click",
    blindbox_detail_closeKYCFailedModal
  );
  $("#blindbox-detail-submit-card-start").on(
    "click",
    blindbox_detail_openSubmitCardFormModal
  );
  $("#blindbox-detail-close-submit-card-form").on(
    "click",
    blindbox_detail_closeSubmitCardFormModal
  );
  $("#blindbox-detail-submit-card-generate").on(
    "click",
    blindbox_detail_openSubmitCardStoreModalSuccess
  );

  $("#blindbox-detail-generate-shipping-label-success-close").on(
    "click",
    closeGenSuccesModalBlindboxDetail
  );

  //trx history
  $("#trx-history-submit-card").on("click", trx_history_openSubmitCardModal);
  $("#trx-history-login").on("click", trx_history_openLoginModal);
  $("#transaction-history-mobile-submit-card").on(
    "click",
    trx_history_openSubmitCardModal
  );
  $("#transaction-history-mobile-login").on(
    "click",
    trx_history_openLoginModal
  );
  $("#trx-history-close-connect").on("click", trx_history_closeLoginModal);
  $("#trx-history-close-KYC").on("click", trx_history_closeKYCModal);
  $("#trx-history-KYC-cancel").on("click", trx_history_closeKYCModal);
  $("#trx-history-KYC-confirm").on("click", trx_history_openKYCFailedModal);
  $("#trx-history-close-submit-card").on(
    "click",
    trx_history_closeSubmitCardModal
  );
  $("#trx-history-close-kyc-failed").on(
    "click",
    trx_history_closeKYCFailedModal
  );
  $("#trx-history-submit-card-start").on(
    "click",
    trx_history_openSubmitCardFormModal
  );
  $("#trx-history-close-submit-card-form").on(
    "click",
    trx_history_closeSubmitCardFormModal
  );
  $("#trx-history-submit-card-generate").on(
    "click",
    trx_history_closeSubmitCardFormModalSuccess
  );

  $("#trx-history-generate-shipping-label-success-close").on(
    "click",
    closeGenSuccesModalTrxHistory
  );

  $("#trx-history-submit-card-store").on(
    "click",
    trx_history_openSubmitCardStoreModal
  );
  $("#trx-history-submit-card-store-appointment").on(
    "click",
    trx_history_closeSubmitCardStoreModal
  );

  // nft detail
  $("#nft-detail-submit-card").on("click", nft_detail_openSubmitCardModal);
  $("#nft-detail-login").on("click", nft_detail_openLoginModal);
  $("#nft-detail-mobile-submit-card").on(
    "click",
    nft_detail_openSubmitCardModal
  );
  $("#nft-detail-mobile-login").on("click", nft_detail_openLoginModal);
  $("#nft-detail-close-connect").on("click", nft_detail_closeLoginModal);
  $("#nft-detail-close-KYC").on("click", nft_detail_closeKYCModal);
  $("#nft-detail-KYC-cancel").on("click", nft_detail_closeKYCModal);
  $("#nft-detail-KYC-confirm").on("click", nft_detail_openKYCFailedModal);
  $("#nft-detail-close-submit-card").on(
    "click",
    nft_detail_closeSubmitCardModal
  );
  $("#nft-detail-close-kyc-failed").on("click", nft_detail_closeKYCFailedModal);
  $("#nft-detail-submit-card-start").on(
    "click",
    nft_detail_openSubmitCardFormModal
  );
  $("#nft-detail-close-submit-card-form").on(
    "click",
    nft_detail_closeSubmitCardFormModal
  );
  $("#nft-detail-submit-card-generate").on(
    "click",
    nft_detail_closeSubmitCardFormModalSuccess
  );

  $("#nft-detail-generate-shipping-label-success-close").on(
    "click",
    closeGenSuccesModalNft
  );

  $("#nft-detail-submit-card-store").on(
    "click",
    nft_detail_openSubmitCardStoreModal
  );
  $("#nft-detail-submit-card-store-appointment").on(
    "click",
    nft_detail_closeSubmitCardStoreModal
  );

  // nft detail payment
  $("#nft-detail-payment-crypto-open").on(
    "click",
    nft_detail_openPaymentCryptoModal
  );

  $("#nft-detail-close-payment-crypto-x").on(
    "click",
    nft_detail_closePaymentModal
  );

  $("#nft-detail-close-payment-credit-card-x").on(
    "click",
    nft_detail_closePaymentModal
  );

  $("#nft-detail-payment-success-close").on("click", () => {
    setTimeout(() => {
      nft_detail_closePaymentSuccessModal();
    }, 1);
  });
  $("#nft-detail-close-back").on("click", nft_detail_closeBack);

  //nft detail
  $("#ctp_NFT_detail_login").on("click", openLoginModal);
});

// mobile menu
window.addEventListener("DOMContentLoaded", () => {
  $("#mobile-menu-button").on("click", () => {
    $("#mobile-menu-side").addClass("show");
  });
  $("#mobile-menu-close").on("click", () => {
    $("#mobile-menu-side").removeClass("show");
  });
  //nft detail
  $("#mobile-nft-detail-menu-button").on("click", () => {
    $("#mobile-nft-detail-menu-side").addClass("show");
  });
  $("#mobile-nft-detail-menu-close").on("click", () => {
    $("#mobile-nft-detail-menu-side").removeClass("show");
  });
  //blindBox
  $("#blindbox-menu-button").on("click", () => {
    $("#blindbox-menu-side").addClass("show");
  });
  $("#blindBox-menu-close").on("click", () => {
    $("#blindbox-menu-side").removeClass("show");
  });
  //blindBox detail
  $("#blindbox-detail-menu-button").on("click", () => {
    $("#blindbox-detail-menu-side").addClass("show");
  });
  $("#blindbox-detail-menu-close").on("click", () => {
    $("#blindbox-detail-menu-side").removeClass("show");
  });
  //transaction history
  $("#transaction-history-menu-button").on("click", () => {
    $("#transaction-history-menu-side").addClass("show");
  });
  $("#transaction-history-menu-close").on("click", () => {
    $("#transaction-history-menu-side").removeClass("show");
  });

  $("#drawbox-now-btn").on("click", () => {
    $("#deliver-card").removeClass("hidden");
  });

  $("#blindbox-detail-claim").on("click", () => {
    $("#deliver-card").addClass("hidden");
  });

  $('input[name="claim-method"]').on("change", function () {
    if ($(this).is(":checked")) {
      if ($(this).val() === "physical-card") {
        $("#claim-physical-card-container").addClass("radio-active");
        $("#claim-nft-container").removeClass("radio-active");
        $("#claim-token-container").removeClass("radio-active");
        $("#claim-nft-info").addClass("hidden");
        $("#claim-token-info").addClass("hidden");
        $("#physical-card-info").removeClass("hidden");
      }

      if ($(this).val() === "claim-nft") {
        $("#claim-nft-container").addClass("radio-active");
        $("#claim-physical-card-container").removeClass("radio-active");
        $("#claim-token-container").removeClass("radio-active");
        $("#claim-nft-info").removeClass("hidden");
        $("#claim-token-info").addClass("hidden");
        $("#physical-card-info").addClass("hidden");
      }

      if ($(this).val() === "claim-token") {
        $("#claim-token-container").addClass("radio-active");
        $("#claim-nft-container").removeClass("radio-active");
        $("#claim-physical-card-container").removeClass("radio-active");
        $("#claim-nft-info").addClass("hidden");
        $("#physical-card-info").addClass("hidden");
        $("#claim-token-info").removeClass("hidden");
      }
    }
  });

  $("#close-nft-detail-payment-failed").on("click", () => {
    $("#modal-nft-detail-payment-failed").addClass("hidden");
  });

  $("#draw-blind-crypto-btn").on("click", () => {
    $("#draw-blind-crypto-container").removeClass("hidden");
    $("#draw-blind-credit-card-container").addClass("hidden");
    $("#draw-blind-credit-card-btn").removeClass("active-btn");
    $("#draw-blind-crypto-btn").addClass("active-btn");
  });

  $("#draw-blind-credit-card-btn").on("click", () => {
    $("#draw-blind-crypto-container").addClass("hidden");
    $("#draw-blind-credit-card-container").removeClass("hidden");
    $("#draw-blind-credit-card-btn").addClass("active-btn");
    $("#draw-blind-crypto-btn").removeClass("active-btn");
  });

  $("#blindbox-detail-claim-go-to-collection").on("click", () => {
    window.location.href = "./transactionhistory.html";
  });

  //nft action more
  // Bt/tt menu khi nhn nt
  $("#nft-action-more-1").on("click", function (event) {
    event.stopPropagation(); // Ngn chn s kin lan ln document
    $(".nft-action-more-content").each(function () {
      const $modal = $(this);
      // Kim tra nu modal ang hin th v khng phi l target ca s kin click
      if (
        !$modal.hasClass("hidden") &&
        !$modal.is(event.target) &&
        $modal.has(event.target).length === 0
      ) {
        $modal.addClass("hidden");
      }
    });
    $("#nft-action-more-1-content").toggleClass("hidden");
  });

  $("#nft-action-more-2").on("click", function (event) {
    event.stopPropagation(); // Ngn chn s kin lan ln document
    $(".nft-action-more-content").each(function () {
      const $modal = $(this);
      // Kim tra nu modal ang hin th v khng phi l target ca s kin click
      if (
        !$modal.hasClass("hidden") &&
        !$modal.is(event.target) &&
        $modal.has(event.target).length === 0
      ) {
        $modal.addClass("hidden");
      }
    });
    $("#nft-action-more-2-content").toggleClass("hidden");
  });

  $("#nft-action-more-3").on("click", function (event) {
    event.stopPropagation(); // Ngn chn s kin lan ln document
    $(".nft-action-more-content").each(function () {
      const $modal = $(this);
      // Kim tra nu modal ang hin th v khng phi l target ca s kin click
      if (
        !$modal.hasClass("hidden") &&
        !$modal.is(event.target) &&
        $modal.has(event.target).length === 0
      ) {
        $modal.addClass("hidden");
      }
    });
    $("#nft-action-more-3-content").toggleClass("hidden");
  });

  $("#nft-action-more-4").on("click", function (event) {
    event.stopPropagation(); // Ngn chn s kin lan ln document
    $(".nft-action-more-content").each(function () {
      const $modal = $(this);
      // Kim tra nu modal ang hin th v khng phi l target ca s kin click
      if (
        !$modal.hasClass("hidden") &&
        !$modal.is(event.target) &&
        $modal.has(event.target).length === 0
      ) {
        $modal.addClass("hidden");
      }
    });
    $("#nft-action-more-4-content").toggleClass("hidden");
  });

  $("#nft-action-more-5").on("click", function (event) {
    event.stopPropagation(); // Ngn chn s kin lan ln document
    $(".nft-action-more-content").each(function () {
      const $modal = $(this);
      // Kim tra nu modal ang hin th v khng phi l target ca s kin click
      if (
        !$modal.hasClass("hidden") &&
        !$modal.is(event.target) &&
        $modal.has(event.target).length === 0
      ) {
        $modal.addClass("hidden");
      }
    });
    $("#nft-action-more-5-content").toggleClass("hidden");
  });

  $("#nft-action-more-6").on("click", function (event) {
    event.stopPropagation(); // Ngn chn s kin lan ln document
    $(".nft-action-more-content").each(function () {
      const $modal = $(this);
      // Kim tra nu modal ang hin th v khng phi l target ca s kin click
      if (
        !$modal.hasClass("hidden") &&
        !$modal.is(event.target) &&
        $modal.has(event.target).length === 0
      ) {
        $modal.addClass("hidden");
      }
    });
    $("#nft-action-more-6-content").toggleClass("hidden");
  });

  $("#nft-action-more-7").on("click", function (event) {
    event.stopPropagation(); // Ngn chn s kin lan ln document
    $(".nft-action-more-content").each(function () {
      const $modal = $(this);
      // Kim tra nu modal ang hin th v khng phi l target ca s kin click
      if (
        !$modal.hasClass("hidden") &&
        !$modal.is(event.target) &&
        $modal.has(event.target).length === 0
      ) {
        $modal.addClass("hidden");
      }
    });
    $("#nft-action-more-7-content").toggleClass("hidden");
  });

  $("#nft-action-more-8").on("click", function (event) {
    event.stopPropagation(); // Ngn chn s kin lan ln document
    $(".nft-action-more-content").each(function () {
      const $modal = $(this);
      // Kim tra nu modal ang hin th v khng phi l target ca s kin click
      if (
        !$modal.hasClass("hidden") &&
        !$modal.is(event.target) &&
        $modal.has(event.target).length === 0
      ) {
        $modal.addClass("hidden");
      }
    });
    $("#nft-action-more-8-content").toggleClass("hidden");
  });

  // n menu khi nhn chut bn ngoi
  $(document).on("click", function (event) {
    // Tm tt c cc modal c class chung, v d: .nft-action-more-content
    $(".nft-action-more-content").each(function () {
      const $modal = $(this);
      // Kim tra nu modal ang hin th v khng phi l target ca s kin click
      if (
        !$modal.hasClass("hidden") &&
        !$modal.is(event.target) &&
        $modal.has(event.target).length === 0
      ) {
        $modal.addClass("hidden");
      }
    });
  });
});
</script></div><div id="ixotxei"><script>
    if (window.$appContract) console.log("skip set appContract");
    else
      window.$appContract = {
        contract: {
          address: "0xaD4eC1c5e1a9b1edC7DC6F37aFB786DDeb8ff08e",
          abi: '[{"inputs":[{"internalType":"address","name":"_collection","type":"address"},{"internalType":"address","name":"_fundHolder","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"index","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"}],"name":"AdjustSaleByIndexEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_tokenPrice","type":"uint256"}],"name":"BatchSaleListingEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[],"name":"PauseSaleEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_beneficiary","type":"address"},{"indexed":false,"internalType":"uint256","name":"tokenId_","type":"uint256"}],"name":"PurchaseWithFiatEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_beneficiary","type":"address"},{"indexed":false,"internalType":"uint256","name":"tokenId_","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"PurchaseWithNativeEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"fundHolder","type":"address"}],"name":"SetFundHolderEvent","type":"event"},{"anonymous":false,"inputs":[],"name":"UnpauseSaleEvent","type":"event"},{"inputs":[],"name":"COLLECTION","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_BATCH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"adjustSaleByIndex","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_quantity","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"batchSaleListing","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"fundHolder","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSaleInfo","outputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_beginIndex","type":"uint256"},{"internalType":"uint256","name":"_size","type":"uint256"}],"name":"getSaleList","outputs":[{"components":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"}],"internalType":"struct AdminSale.SaleInfo[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSaleSize","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isPaused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"onERC721Received","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"operator","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"pauseSale","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"purchaseWithFiatByIndex","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"purchaseWithNativeByIndex","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"saleList","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_fundHolder","type":"address"}],"name":"setFundHolder","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_operator","type":"address"}],"name":"setOperator","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"tokenPriceMap","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"unpauseSale","outputs":[],"stateMutability":"nonpayable","type":"function"}]',
        },
      };
  </script><script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script><script src="https://webstudio-d.morpheuslabs.io/sdk/keyboard.js?v=0.0.2"></script><script src="https://webstudio-d.morpheuslabs.io/sdk/callApi.js?v=0.0.1"></script><script src="https://unpkg.com/html5-qrcode"></script><script src="https://webstudio-d.morpheuslabs.io/sdk/qrscanner.js?v=1"></script><script src="https://webstudio-d.morpheuslabs.io/sdk/modal.js?v=0.0.1"></script><script src="https://js.stripe.com/v3/"></script><script src="index.js"></script><script>
    var props = { irmj: {} };
    var ids = Object.keys(props)
      .map(function (id) {
        return "#" + id;
      })
      .join(",");
    var els = document.querySelectorAll(ids);
    for (var i = 0, len = els.length; i < len; i++) {
      var el = els[i];
      (function (e) {
        const { contract: t, metadata: n, api: a } = e;
        if (t) {
          const e = JSON.parse(atob(t || "") || '""');
          if (!e) return;
          localStorage.setItem("AppContract", JSON.stringify(e)),
            window.AppContract &&
              ((window.$appContract = new window.AppContract({
                contract: e,
                api: a,
                metadata: n,
              })),
              console.log("$appContract ==>>", window.$appContract));
        }
        a &&
          (localStorage.setItem("AppAPI", a),
          window.AppAPIModule &&
            ((window.$appAPI = new window.AppAPIModule({ api: a })),
            console.log("$appAPI ==>>", window.$appAPI))),
          localStorage.setItem("AppMetadata", n || "");
      }).bind(el)(props[el.id]);
    }
    var props = {
      iyl4md: {},
      i3vdlf: {},
      iztfs8: {},
      ibnwri: {},
      i5a73j: {},
      inyat8: {},
      iir3zv: {},
      ibrvzl: {},
      i0gxbz: {},
      ixuiz3: {},
      icx1kl: {},
      ifg5kp: {},
      i5hih4: {},
      iwnwqk: {},
      i30k59: {},
      imtzsi: {},
      i1meuq: {},
      iui27q: {},
      iqu1lj: {},
      iozuet: {},
      ivra7h: {},
      idgxww: {},
      ioki9y: {},
      ibabq3: {},
      iuba5q: {},
      i2bbgw: {},
      itfeyj: {},
      ixw6bjh: {},
      i0ejafx: {},
      "close-connect": {},
      "loading-metamask": {},
      i2b2pys: {},
      "loading-walletconnect": {},
      i9hoiuh: {},
      "loading-coinbase": {},
      ixkrws6: {},
      iv763vw: {},
      iqmople: {},
      ihr4qyf: {},
      iz57dbo: {},
      "close-payment": {},
      ih7bhs6: {},
      idrn7fk: {},
      iotpp5r: {},
      ixwnq16: {},
      i9o1l38: {},
      i5n047s: {},
      imbnp3j: {},
      i1nya7f: {},
      ijbis8u: {},
      igudcic: {},
      i5j0qkf: {},
      iypnxrp: {},
      iwcbxur: {},
      iawsv2h: {},
      i5jfldj: {},
      igcz275: {},
      i5j0oox: {},
      i8pd51d: {},
      iaqs3r8: {},
    };
    var ids = Object.keys(props)
      .map(function (id) {
        return "#" + id;
      })
      .join(",");
    var els = document.querySelectorAll(ids);
    for (var i = 0, len = els.length; i < len; i++) {
      var el = els[i];
      (async function (e) {
        if ("api" === this.getAttribute("datasource")) {
          const e = this.getAttribute("apiUse");
          e &&
            window.addEventListener(e, async (e) => {
              const t = (function (e, t) {
                let n =
                  arguments.length > 2 && void 0 !== arguments[2]
                    ? arguments[2]
                    : void 0;
                const a = (n) =>
                    String.prototype.split
                      .call(t, n)
                      .filter(Boolean)
                      .reduce(
                        (e, t) => (null !== e && void 0 !== e ? e[t] : e),
                        e
                      ),
                  o = a(/[,[\]]+?/) || a(/[,[\].]+?/);
                return void 0 === o || o === e ? n : o;
              })(e.detail, this.getAttribute("mappingresponse"), 0);
              this.setAttribute("src", t);
            });
        }
      }).bind(el)(props[el.id]);
    }
    var props = {
      iqzuhxz: {
        projectId: "8f7ab47e61239d51a7a31acfdeadf633",
        name: "Web3 No-Code MorpheusLab",
        description: "No-Code Web3 Platform",
        url: "https://morpheuslabs.io",
        icon: "https://tse3.mm.bing.net/th?id=OIP.XFeasV5g0fiLQpPU0TaQawAAAA&pid=Api&P=0&h=180",
        themeMode: "light",
        defaultNetworkId: "1",
        networks: [
          { chainId: "1", name: "Ethereum" },
          { chainId: "56", name: "BNB Smart Chain" },
          { chainId: "137", name: "Polygon" },
          { chainId: "11155111", name: "Sepolia" },
          { chainId: "97", name: "BNB Smart Chain Testnet" },
          { chainId: "80002", name: "Amoy" },
        ],
      },
    };
    var ids = Object.keys(props)
      .map(function (id) {
        return "#" + id;
      })
      .join(",");
    var els = document.querySelectorAll(ids);
    for (var i = 0, len = els.length; i < len; i++) {
      var el = els[i];
      (function (e) {
        var t, n, a;
        const {
            projectId: o,
            name: s,
            description: i,
            url: r,
            icon: l,
            defaultNetworkId: c,
            themeMode: d,
            networks: p,
          } = e,
          u = p.find((e) => e.chainId.toString() === c.toString());

        const { createWeb3Modal: h, defaultConfig: m } =
            window.webstudio.web3Modal,
          g = { name: s, description: i, url: r, icons: [l] };
        (window.networks = p),
          (window.modal = h({
            ethersConfig: m({ metadata: g }),
            chains: [u],
            defaultChain: [u],
            projectId: o,
          })),
          window.modal.setThemeMode(d),
          (this.handleChange = (e) => {
            let {
              provider: t,
              providerType: n,
              address: a,
              chainId: o,
              isConnected: s,
            } = e;
            console.log("Status changed! "),
              (window.currentChain = p.find((e) => e.chainId === o)),
              s
                ? localStorage.setItem("walletAddress", a)
                : localStorage.removeItem("walletAddress"),
              document.dispatchEvent(new CustomEvent("DataChanged"));
          }),
          window.modal.subscribeProvider(this.handleChange);
        const { initializeDatasource: f } =
          null === (t = window) ||
          void 0 === t ||
          null === (n = t.webstudio) ||
          void 0 === n ||
          null === (a = n.modules) ||
          void 0 === a
            ? void 0
            : a.datasource;
        f && f();
      }).bind(el)(props[el.id]);
    }
    var props = {
      login: {},
      i1b6dx: {},
      iztxpw: {},
      iwj6mf: {},
      irbf7m: {},
      it2549: {},
      ineunn: {},
      isnfgj: {},
      ik0u79: {},
      iiyhkl: {},
      iaub9i: {},
      iplmps: {},
      imanxx: {},
      i70boj: {},
      iloonl: {},
      i411m3: {},
      iu5y2h: {},
      i5m1kf: {},
      impn7q: {},
      iofl5l: {},
      ixxe0g: {},
      i2q9eg: {},
      i3xmxm: {},
      iz2ke9: {},
      irgqaf: {},
      i0y493: {},
      ips2is: {},
      inchxr: {},
      imw3ul: {},
      i86t05: {},
      ivh953: {},
      iip4lh: {},
      isgy37: {},
      iicp98: {},
      i7ylmb: {},
      ioz4ep: {},
      i5vdlg: {},
      i5zui3: {},
      iymszv: {},
      ine5pp: {},
      icu487: {},
      idnfwf: {},
      il2dlm: {},
      imhrv7: {},
      ieujr8: {},
      iya4na: {},
      ibtq4p: {},
      i172jk: {},
      ittlv2: {},
      ix0j4k: {},
      i6obqo: {},
      ixqoxn: {},
      iizdy8: {},
      io2u0p: {},
      i8pn01: {},
      ibrp17: {},
      i27846: {},
      ih75vj: {},
      i7dg3a: {},
      i8fvtm: {},
      i90988: {},
      ir9mr7: {},
      i78uvpt: {},
      iln4qhg: {},
      il3o3vt: {},
      i1e61ql: {},
      ij1f43t: {},
      i6z8g0j: {},
      ihjcdq3: {},
      ibbg3xh: {},
      i0tp7ai: {},
      iv5v6lo: {},
      i22wb1l: {},
      iwo1rmi: {},
      iifp3wb: {},
      i5x4qlw: {},
      "mint-nft": {},
      iefcic3: {},
      it4teno: {},
      iusdbei: {},
      iw3k7dp: {},
      iciuocr: {},
      i4mk5gh: {},
      i9nbbgw: {},
      iryi2sh: {},
      ih6jfal: {},
      iab0f9r: {},
      i3wqwla: {},
      i7pbzov: {},
      ijtnpd4: {},
      ifrfvt9: {},
      i0kqjgv: {},
      ihuq4bj: {},
      itarqtl: {},
      iptkvz7: {},
      ia2070q: {},
      irf6xez: {},
      ieqriph: {},
      ie4035b: {},
      iwh7ay4: {},
      i450gdo: {},
      i96i2ah: {},
      ijm4shr: {},
      i8id9n5: {},
      ifgx4wm: {},
      ihbac61: {},
      pay: {},
      i37dnae: {},
      ih1uumk: {},
      idgjwmh: {},
      icg6vw5: {},
      i253lsu: {},
      i0nuhfi: {},
      ikg402t: {},
      iw6re2g: {},
      iq4a88x: {},
      iah7afk: {},
      iyyunjl: {},
      i8cuj5o: {},
      "close-payment-success": {},
      ikz5n6i: {},
      isurrq1: {},
      "close-payment-failed": {},
    };
    var ids = Object.keys(props)
      .map(function (id) {
        return "#" + id;
      })
      .join(",");
    var els = document.querySelectorAll(ids);
    for (var i = 0, len = els.length; i < len; i++) {
      var el = els[i];
      (async function (e) {
        let t = this.getAttribute("datasource");
        if ("api" === t) {
          const e = this.getAttribute("apiUse");
          e &&
            window.addEventListener(e, async (e) => {
              const t = (function (e, t) {
                let n =
                  arguments.length > 2 && void 0 !== arguments[2]
                    ? arguments[2]
                    : void 0;
                const a = (n) =>
                    String.prototype.split
                      .call(t, n)
                      .filter(Boolean)
                      .reduce(
                        (e, t) => (null !== e && void 0 !== e ? e[t] : e),
                        e
                      ),
                  o = a(/[,[\]]+?/) || a(/[,[\].]+?/);
                return void 0 === o || o === e ? n : o;
              })(e.detail, this.getAttribute("mappingresponse"), 0);
              var n;
              this.innerHTML =
                ((n = t),
                isNaN(n) || null === n || "" === n
                  ? n
                  : parseFloat(n).toFixed(2));
            });
        } else if ("smart_contract" === t) {
          const t = e;
          let a = t.contract || this.getAttribute("contract"),
            o = t.method || this.getAttribute("method"),
            s = t.params || "",
            i = t.isBignumber || !1,
            r = t.decimal || 0,
            l = function (e) {
              let t =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 18;
              return e
                ? e._isBigNumber
                  ? e.div(new window.BigNumber(10).pow(t).toString()).toNumber()
                  : new window.BigNumber(e)
                      .div(new window.BigNumber(10).pow(t).toString())
                      .toNumber()
                : 0;
            },
            c = JSON.parse(atob(a || "") || '""');
          if (!c || !c.abi) return;
          let d = JSON.parse(atob(o || "") || '""');
          if (!d) return;
          s = s.split(",").map((e) => e.trim());
          const p = new new window.Web3(
            c.rpcURL || window.ethereum
          ).eth.Contract(JSON.parse(c.abi), c.address);
          let u = "";
          try {
            u = await p.methods[d.name](...s).call();
          } catch (n) {
            console.error("Error calling contract method:", n);
          }
          i && r
            ? ((u = l(u, parseInt(r || 0))),
              (this.innerText = isNaN(u) ? 0 : u))
            : (this.innerText = u);
        }
      }).bind(el)(props[el.id]);
    }
    var props = { ib4b1ic: {}, i8oejnf: {} };
    var ids = Object.keys(props)
      .map(function (id) {
        return "#" + id;
      })
      .join(",");
    var els = document.querySelectorAll(ids);
    for (var i = 0, len = els.length; i < len; i++) {
      var el = els[i];
      (function (e) {
        const t = this;
        function n(e) {
          return (
            Object.keys(e).forEach((t) => {
              const n = e[t];
              if (n.includes("localstorage.")) {
                const a = n.split("localstorage.")[1],
                  o = localStorage.getItem(a);
                o && (e[t] = n.replace("localstorage.".concat(a), o));
              }
            }),
            e
          );
        }
        function a(e) {
          return (
            Object.keys(e).forEach((t) => {
              const n = e[t];
              if (n.includes("cookie.")) {
                const a = n.split("cookie.")[1],
                  o = (function (e) {
                    var t = document.cookie.match(
                      RegExp(
                        "(?:^|;\\s*)" +
                          e.replace(/([.*+?\^$(){}|\[\]\/\\])/g, "\\$1") +
                          "=([^;]*)"
                      )
                    );
                    return t ? t[1] : null;
                  })(a);
                o && (e[t] = n.replace("cookie.".concat(a), o));
              }
            }),
            e
          );
        }
        this.addEventListener("submit", function (o) {
          o.preventDefault();
          const s = {};
          t.querySelectorAll(
            'input[type="text"], input[type="email"], input[type="password"]'
          ).forEach(function (e) {
            s[e.name] = e.value;
          });
          t.querySelectorAll("textarea").forEach(function (e) {
            s[e.name] = e.value;
          });
          t.querySelectorAll('input[type="radio"]').forEach(function (e) {
            e && (s[e.name] = e.value);
          });
          t.querySelectorAll('input[type="checkbox"]').forEach(function (e) {
            e.checked &&
              (s[e.name]
                ? (s[e.name] = s[e.name] + "," + e.value)
                : (s[e.name] = e.value));
          });
          t.querySelectorAll("select").forEach(function (e) {
            "undefined" !== e.value && (s[e.name] = e.value);
          });
          const i = t.getElementsByClassName("result-container")[0];
          if ("api" === e.dataSource) {
            const t = e.chooseApi,
              o = JSON.parse(t),
              r = { method: o.method || "GET" };
            o.headers &&
              ((r.headers = JSON.parse(o.headers)),
              Array.isArray(r.headers)
                ? (r.headers.forEach((e) => {
                    n(e), a(e);
                  }),
                  (r.headers = r.headers.reduce((e, t) => {
                    let n = Object.keys(t)[0];
                    return (e[n] = t[n]), e;
                  }, {})))
                : (n(r.headers), a(r.headers))),
              "GET" !== r.method && (r.body = JSON.stringify(s)),
              console.log("options.headers: ", r.headers),
              fetch(o.url, r)
                .then((e) => e.json())
                .then((e) => {
                  const t = new CustomEvent("".concat(o.name), { detail: e });
                  window.dispatchEvent(t),
                    console.log("dispatched event listener for: ", [
                      o.name,
                      new Date(),
                    ]);
                })
                .catch((e) => {
                  console.log("error: ", e), (i.innerHTML = JSON.stringify(e));
                });
          }
        });
        const o = t.getElementsByClassName("btn-reset")[0];
        o &&
          o.addEventListener("click", function (e) {
            t.reset();
          });
      }).bind(el)(props[el.id]);
    }
  </script><script>
    window.onload = () => {
      const STRIPE_KEY =
        "pk_test_51PrblHFiJyqGpASkvNS5Ya11ZyEF3u5rcTRI8A2rS12s3DBfXaSmqIZXHKuS0TRJOeP9zD8knbR818cATP7NLXpw00BApUgM8Q";
      /**
       * @typedef {"metamask" | "walletconnect" | "coinbase"} Wallet
       * @typedef {{id:number,locked_at:string,name:string,token_image?:string,short_description?:string,short_pack?:string,status:"in_stock",token_id:string,token_uri:string}} NFTData
       * @typedef {[{data:{nfts:{[key:string]:NFTData}},meta:{count:number}}]} NFTSResponse
       * @typedef {{data:string}[]} GetProofsResponse
       * @typedef {{whitelistAbi:string,whitelistAddress:string}} AppMetadata
       * @typedef {{contract:{abi:string,address:string},metadata:string}} AppContract
       * @typedef {{data:{data:{id:string,name:string,messsage:string,status:number},status:"pass"}}[]} KYCResponse
       * @typedef {{data:{data:{client_secret:string}}}[]} CreatePaymentResponse
       * @typedef {{data:{eth_price:number,nft_price:number}}[]} GetPriceUSDResponse
       */

      const CHAIN_ID = 11155111;
      const networks = {
        ethereum: {
          chainId: "0x1",
          chainName: "Ethereum Mainnet",
          nativeCurrency: {
            name: "ETH",
            symbol: "ETH",
            decimals: 18,
          },
          rpcUrls: ["https://ethereum-rpc.publicnode.com"],
          blockExplorerUrls: ["https://etherscan.io/"],
        },
        sepolia: {
          chainId: "0xaa36a7",
          chainName: "Sepolia Testnet",
          nativeCurrency: {
            name: "tETH",
            symbol: "tETH",
            decimals: 18,
          },
          rpcUrls: ["https://ethereum-sepolia-rpc.publicnode.com"],
          blockExplorerUrls: ["https://sepolia.etherscan.io/"],
        },
      };
      const networksChainIds = {
        1: "ethereum",
        11155111: "sepolia",
      };
      if (!networks[networksChainIds[CHAIN_ID]])
        console.error("CHAIN_ID invalid!");
      const RPC_URL = networks[networksChainIds[CHAIN_ID]].rpcUrls[0];

      // const headers = {
      //   "x-api-key": X_API_KEY,
      //   referrer: REFERRER,
      //   "content-type": "application/json",
      // };

      /** @type {Window & {$appContract:AppContract}}*/
      const windowObject = window;
      // try {
      //   windowObject.$appMetadata = JSON.parse(
      //     windowObject.$appContract.metadata
      //   );
      // } catch (error) {
      //   console.log(error);
      // }

      const web3Instance = new Web3(new Web3.providers.HttpProvider(RPC_URL));
      const stripe = Stripe(STRIPE_KEY);
      const elements = stripe.elements();

      /**
       * @param {string} text
       * @param {number} start
       * @param {number} end
       */
      const shortText = (text, start, end) =>
        text.slice(0, start) + "..." + text.slice(text.length - end);

      /**
       * @param {string} text
       * @param {(string|number)[]} values
       */
      const concat = (text, ...values) =>
        text
          .split("%s%")
          .map((item, index) => item + (values[index] || ""))
          .join("");

      /** @type {{
       * methods:{
       *    getSaleInfo:()=>{call:()=>Promise<{0:string,1:bigint,2:boolean}>},
       *    getSaleSize:()=>{call:()=>Promise<{0:bigint}>},
       *    getSaleList:(number,number)=>{call:()=>Promise<{0:bigint,1:bigint}[][]>},
       * } | null} */

      const saleContractInstance =
        windowObject.$appContract?.contract?.address &&
        new web3Instance.eth.Contract(
          JSON.parse(windowObject.$appContract?.contract.abi),
          windowObject.$appContract?.contract.address
        );

      // /** @type {{methods:{checkWhitelist:()=>{call:(address:string)=>Promise<boolean>})}} | null} */
      // const whitelistContractInstance =
      //   windowObject.$appMetadata?.whitelistAddress &&
      //   new web3Instance.eth.Contract(
      //     JSON.parse(windowObject.$appMetadata.whitelistAbi),
      //     windowObject.$appMetadata.whitelistAddress
      //   );

      /**
       * @param {string} modalId
       * @param {string|undefined} buttonId
       * @returns {{value:boolean,prevent:boolean,handler:(value?:boolean)=> void,callbacks:((value:T,oldValue:T)=> void)[]}} }
       */
      const useModal = (modalId, buttonId) => {
        const modal = { value: false, prevent: false, callbacks: [] };
        modal.handler = (value) => {
          if (modal.prevent) return;
          const oldValue = modal.value;
          modal.value = value ?? !modal.value;
          if (modal.value) {
            document.body.style.overflow = "hidden";
            $(concat("#modal-%s%", modalId)).addClass("!flex");
          } else {
            document.body.style.overflow = "auto";
            $(concat("#modal-%s%", modalId)).removeClass("!flex");
          }
          if (modal.value !== oldValue)
            modal.callbacks.map((cb) => cb(modal.value, oldValue));
        };
        if (buttonId)
          $(concat("#%s%", buttonId)).on("click", () => modal.handler());
        $(concat("#backdrop-%s%", modalId)).on("click", () =>
          modal.handler(false)
        );
        $(concat("#close-%s%", modalId)).on("click", () =>
          modal.handler(false)
        );
        return modal;
      };

      /**
       * @template T
       * @param {T} initialValue
       * @param {string} name: If name different undefined will auto save to localStorage
       * @returns {{value: T, setValue: (value:T)=> void, callbacks:((value:T,oldValue:T)=> void)[]}}
       */
      const useState = (initialValue, name) => {
        const state = {
          value: initialValue,
          setValue: (value) => {
            const oldValue = state.value;
            state.value = value;
            if (name) {
              if (typeof value === "string") {
                if (value) localStorage.setItem(name, value);
                else localStorage.removeItem(name);
              } else
                console.error(
                  "Auto save localstorage only supported string value"
                );
            }
            if (value !== oldValue)
              state.callbacks.map((cb) => cb(value, oldValue));
          },
          callbacks: [],
        };
        return state;
      };

      /** @param {"cardNumber"|"cardExpiry"|"cardCvc"} id*/
      const createStripeElement = (id) => {
        const stripeElement = elements.create(id, {
          style: {
            base: {
              fontSize: "14px",
              fontFamily: "Poppins, sans-serif",
              color: "#ffffff",
              "::placeholder": {
                color: "#ffffffb3",
              },
            },
          },
        });
        stripeElement.mount(concat("#%s%", id));
        return stripeElement;
      };

      /** @type {ReturnType<typeof useState<any>>}*/
      const provider = useState(null);
      const walletAddress = useState("", "walletAddress");

      /** @type {ReturnType<typeof useState<Wallet>>}*/
      const wallet = useState(undefined, "wallet");

      /** @type {ReturnType<typeof useState<Wallet>>}*/
      const connecting = useState(undefined);

      const headerMenu = useState(false);

      // /** @type {ReturnType<typeof useState<string|null>>}*/
      // const nftSelected = useState(null);

      // /** @type {ReturnType<typeof useState<"crypto"|"credit-card">>}*/
      // const paymentMethod = useState("crypto");

      // /** @type {ReturnType<typeof useState<NFTData[]>>}*/

      const nftList = useState([]);
      const total = useState(undefined);
      const loading = useState(false);

      // const search = useState("");
      // const page = useState(1);
      // /** @type {ReturnType<typeof useState<"eth"|"usdt">>}*/
      // const currency = useState("eth");
      // const currencyMenu = useState(false);
      // const firstName = useState("");
      // const lastName = useState("");
      // const tokenAddress = useState("");
      // const priceWei = useState(0n);
      // const pricUSD = useState(0);
      // const minting = useState(false);

      const cardNumElement = createStripeElement("cardNumber");
      const cardCVCElement = createStripeElement("cardExpiry");
      const cardExpElement = createStripeElement("cardCvc");

      /** @param {Wallet} walletName */
      const getProvider = async (walletName) => {
        if (walletName === "walletconnect") {
          return await window.modal.getWalletProvider();
        }
        let provider = window.ethereum;
        if (!provider) return null;
        if (window.ethereum.providers) {
          provider = window.ethereum.providers.find((provider) => {
            switch (walletName) {
              case "metamask":
                return provider.isMetaMask;
              case "coinbase":
                return provider.isCoinbaseWallet;
            }
          });
        }
        switch (walletName) {
          case "metamask":
            if (provider.isMetaMask) return provider;
            break;
          case "coinbase":
            if (provider.isCoinbaseWallet) return provider;
            break;
        }
      };

      const initWallet = async () => {
        wallet.setValue(localStorage.getItem("wallet"));
        walletAddress.setValue(localStorage.getItem("walletAddress"));
        if (wallet.value === "walletconnect") {
          if (window.modal) {
            window.modal.subscribeProvider(async function (changed) {
              walletAddress.setValue(changed.address);
              provider.setValue(await getProvider(wallet.value));
            });
          }
        } else if (wallet.value) {
          provider.setValue(await getProvider(wallet.value));
          if (provider.value) {
            walletAddress.setValue(provider.value.selectedAddress);
          }
        }
      };

      const modalConnect = useModal("home-modal-connect", "home-login");
      const modalPayment = useModal("payment");
      const modalInvalidNetwork = useModal("invalid-network");
      const modalWhitelistFailed = useModal("whitelist-failed");
      const modalKYCVertication = useModal("kyc-vertification");
      const modalKYCFailed = useModal("kyc-failed");
      const modalPaymentFailed = useModal("payment-failed");
      const modalPaymentSuccess = useModal("payment-success");

      const connectWeb3modal = async () => {
        if (!window.modal) {
          console.error("WS library is not available!");
          return;
        }
        try {
          window.modal.subscribeProvider(async function (changed) {
            walletAddress.setValue(changed.address);
            wallet.setValue(changed.address ? "walletconnect" : null);
          });
          window.modal.subscribeState((state) => {
            if (state.open === false) connecting.setValue(null);
          });
          await window.modal.open();
        } catch (error) {
          connecting.setValue(null);
          console.error("Error connecting to the wallet:", error);
        }
      };

      /** @param {Wallet} walletName */
      const handleConnect = async (walletName) => {
        connecting.setValue(walletName);
        try {
          if (walletName === "walletconnect") return await connectWeb3modal();
          else {
            provider.setValue(await getProvider(walletName));
            if (provider.value) {
              const addresses = await provider.value.request({
                method: "eth_requestAccounts",
              });
              wallet.setValue(walletName);
              walletAddress.setValue(addresses[0]);
            }
          }
        } catch (error) {
          console.log(error);
        }
        connecting.setValue(null);
      };

      const handleDisconnect = () => {
        if (provider.value.disconnect) {
          provider.value.disconnect();
        } else {
          provider.value.request({
            method: "wallet_revokePermissions",
            params: [{ eth_accounts: {} }],
          });
        }
        wallet.setValue(null);
        walletAddress.setValue("");
        headerMenu.setValue(false);
      };

      const handleValidateNetwork = async () => {
        if (!provider.value) throw new Error("No crypto wallet found");
        const chainId = await provider.value.request({
          method: "eth_chainId",
        });

        if (chainId === CHAIN_ID) return true;
        try {
          const result = await provider.value.request({
            method: "wallet_switchEthereumChain",
            params: [{ chainId: networks[networksChainIds[CHAIN_ID]].chainId }],
          });
          return true;
        } catch (error) {
          console.log(error);
          return false;
        }
      };
      const getSize = async () => {
        const size = await saleContractInstance.methods.getSaleSize().call();
        total.setValue(size);
      };

      const getNFTs = async () => {
        loading.setValue(true);
        if (total.value === undefined) await getSize();
        if (total.value === 0) {
          nftList.setValue([]);
          loading.setValue(false);
          return;
        }

        const nfts = await saleContractInstance.methods
          .getSaleList(0, total.value) // TODO: change to page and limit
          .call();
        nftList.setValue(
          nfts.map((item) => ({
            price: item.price,
            tokenId: item.tokenId,
          }))
        );
        console.log(" ~ getNFTs ~ nftList:", nftList);
        loading.setValue(false);
      };

      // const getNFTs = async () => {
      //   if (page.value === 1) nfts.setValue([]);
      //   loading.setValue(true);
      //   const nftSearchParams = new URLSearchParams({
      //     page_limit: NFTS_LIMIT,
      //     page_number: page.value.toString(),
      //   });
      //   if (search.value) nftSearchParams.append("search", search.value);
      //   const nftSearchString = nftSearchParams.toString();
      //   try {
      //     const res = await fetch(NFTS_URL + "?" + nftSearchString, {
      //       headers,
      //     });
      //     /** @type {NFTSResponse} */
      //     const data = await res.json();
      //     nfts.setValue([
      //       ...nfts.value,
      //       ...Object.values(data[0]?.data?.nfts || {}),
      //     ]);
      //     total.setValue(data[0]?.meta?.count || 0);
      //   } catch (error) {
      //     console.log(error);
      //     total.setValue(0);
      //   }
      //   loading.setValue(false);
      // };

      // const getNFTPrice = async () => {
      //   if (currency.value === "eth") {
      //     try {
      //       const saleInfo = await saleContractInstance.methods
      //         .getSaleInfo()
      //         .call();

      //       if (!saleInfo) throw new Error("Cannot get sale info");

      //       const { 0: address, 1: price, 2: isPaused } = saleInfo;

      //       if (isPaused) throw Error("Token is paused sale");

      //       priceWei.setValue(price);
      //       tokenAddress.setValue(address);
      //     } catch (error) {
      //       console.log(error);
      //       priceWei.setValue(0n);
      //     }
      //   }
      // };
      // const getNFTUSD = async () => {
      //   try {
      //     const res = await fetch(PRICE_USD_URL, { headers });
      //     /** @type {GetPriceUSDResponse} */
      //     const data = await res.json();
      //     pricUSD.setValue(data[0]?.data?.nft_price || 0);
      //   } catch (error) {
      //     pricUSD.setValue(0);
      //   }
      // };

      const getProofs = async () => {
        try {
          const res = await fetch(GET_PROOFS_URL, {
            headers,
            body: JSON.stringify({ wallet_address: walletAddress.value }),
            method: "POST",
          });
          /** @type {GetProofsResponse} */
          const data = await res.json();
          return data;
        } catch (error) {
          return null;
        }
      };

      // const handleCheckWhitelist = async () => {
      //   try {
      //     const [isWhitelisted, proofs] = await Promise.all([
      //       whitelistContractInstance.methods
      //         .checkWhitelist(walletAddress.value)
      //         .call(),
      //       getProofs(),
      //     ]);
      //     if (isWhitelisted) return [];
      //     if (proofs.length) return proofs.map((item) => item.data);
      //   } catch (error) {
      //     console.log(error);
      //   }
      //   return null;
      // };

      // const handleMint = async () => {
      //   minting.setValue(true);

      //   const isValidNetwork = await handleValidateNetwork();
      //   if (!isValidNetwork) {
      //     modalInvalidNetwork.handler();
      //     return minting.setValue(false);
      //   }
      //   const proofs = await handleCheckWhitelist();
      //   if (!proofs) {
      //     modalWhitelistFailed.handler();
      //     return minting.setValue(false);
      //   }
      //   try {
      //     const web3 = new Web3(provider.value);

      //     /** @type {{methods:{purchaseWithNative:(_proof:string[],_tokenId:string)=>{send:(opts:{from:string,value:bigint})=>Promise<{0:string,1:bigint,2:boolean}>}} | null} */
      //     const saleContract =
      //       windowObject.$appContract.contract?.address &&
      //       new web3.eth.Contract(
      //         JSON.parse(windowObject.$appContract.contract.abi),
      //         windowObject.$appContract.contract.address
      //       );

      //     saleContract.methods
      //       .purchaseWithNative(proofs, nftSelected.value)
      //       .send({
      //         from: web3.utils.toChecksumAddress(walletAddress.value),
      //         value: priceWei.value,
      //       })
      //       .on("transactionHash", function (hash) {
      //         $("#payment-transaction-hash").text(shortText(hash, 16, 17));
      //       })
      //       .on("receipt", function (receipt) {
      //         $("#payment-time").text(
      //           dayjs()
      //             .add(new Date().getTimezoneOffset(), "minute")
      //             .format(`MMM-DD-YYYY hh:mm:ss A [UTC]`)
      //         );
      //         modalPaymentSuccess.handler();
      //         minting.setValue(false);
      //       })
      //       .on("error", function (error) {
      //         console.log("on error: ", error);
      //         modalPaymentFailed.handler();
      //         minting.setValue(false);
      //       })
      //       .catch(function (error) {
      //         console.log(error);
      //         modalPaymentFailed.handler();
      //         minting.setValue(false);
      //       });
      //   } catch (error) {
      //     console.log(error);
      //   }
      // };

      // const handleKYC = async () => {
      //   try {
      //     const res = await fetch(KYC_URL, {
      //       headers,
      //       body: JSON.stringify({ wallet_address: walletAddress.value }),
      //       method: "POST",
      //     });
      //     /** @type {KYCResponse} */
      //     const data = await res.json();
      //     return data[0]?.data;
      //   } catch (error) {
      //     console.log(error);
      //     return null;
      //   }
      // };

      // const handleCreatePayment = async () => {
      //   try {
      //     const res = await fetch(CREATE_PAYMENT_URL, {
      //       headers,
      //       body: JSON.stringify({
      //         wallet_address: walletAddress.value,
      //         name: concat(
      //           "%s% %s%",
      //           $("#first-name").val(),
      //           $("#last-name").val()
      //         ),
      //         amount: 1,
      //       }),
      //       method: "POST",
      //     });
      //     /** @type {CreatePaymentResponse} */
      //     const data = await res.json();
      //     return data[0]?.data?.data;
      //   } catch (error) {
      //     console.log(error);
      //     return null;
      //   }
      // };

      // const handlePay = async () => {
      //   minting.setValue(true);

      //   const validateKYC = await handleKYC();
      //   console.log(validateKYC);
      //   if (validateKYC?.status !== "pass") {
      //     modalKYCFailed.handler();
      //     return minting.setValue(false);
      //   }

      //   try {
      //     const paymentIntent = await handleCreatePayment();
      //     if (!paymentIntent) throw new Error("Cannot get payment intent");
      //     const { error } = await stripe.confirmCardPayment(
      //       paymentIntent.client_secret,
      //       { payment_method: { card: cardNumElement } }
      //     );
      //     if (error) throw new Error(error);

      //     $("#payment-time").text(
      //       dayjs()
      //         .add(new Date().getTimezoneOffset(), "minute")
      //         .format(`MMM-DD-YYYY hh:mm:ss A [UTC]`)
      //     );
      //     modalPaymentSuccess.handler();
      //   } catch (error) {
      //     console.log(error);
      //     modalPaymentFailed.handler();
      //   }

      //   minting.setValue(false);
      // };

      walletAddress.callbacks.push((value) => {
        if (value) {
          $("#blindbox-detail-mobile-userAdress").text(shortText(value, 6, 5));
          $("#blindbox-detail-userAdress").text(shortText(value, 4, 4));
          $("#wallet-address-kyc").text(value);
          $("#login").hide();
          $("#wallet").show();
          $("#crypto-pay").show();
          $("#credit-card-pay").show();
          $("#payment-login").hide();
          $("#blindbox-detail-login").addClass("hidden");
          $("#blindbox-detail-modal-connect").addClass("hidden");
          $("#blindbox-detail-mobile-login").addClass("hidden");
          $("#blindbox-detail-mobile-userAdress").removeClass("hidden");
          $("#blindbox-detail-userAdress").removeClass("hidden");
          $("#blindbox-detail-modal-connect").addClass("hidden");

          // getProofs();
        } else {
          $("#login").show();
          $("#wallet").hide();
          $("#crypto-pay").hide();
          $("#credit-card-pay").hide();
          $("#payment-login").show();
          $("#blindbox-detail-userAdress").addClass("hidden");
          $("#blindbox-detail-login").removeClass("hidden");
          $("#blindbox-detail-mobile-userAdress").addClass("hidden");
          $("#blindbox-detail-mobile-login").removeClass("hidden");
        }
      });
      connecting.callbacks.push((value, oldValue) => {
        if (value) {
          $(concat("#loading-%s%", value)).show();
          $(concat("#%s%", value)).addClass("active");
        }
        if (oldValue) {
          $(concat("#loading-%s%", oldValue)).hide();
          $(concat("#%s%", oldValue)).removeClass("active");
        }
      });
      headerMenu.callbacks.push((value) => {
        if (value) $("#header-menu").show();
        else $("#header-menu").hide();
      });
      loading.callbacks.push((value) => {
        if (value) {
          $("#nft-skeleton").removeClass("hidden");
          $("#nft-trending-list-container").addClass("hidden");
        } else {
          $("#nft-skeleton").addClass("hidden");
          $("#nft-trending-list-container").removeClass("hidden");
        }
      });

      nftList.callbacks.push((value, oldValue) => {
        const nftTemplate = $("#nft-trending-list .nft-item-template");

        // Remove old NFT item
        if (oldValue.length) $("a.nft-item").remove();

        // Render NFT item
        value.forEach((item, index) => {
          const itemElm = nftTemplate.clone();
          itemElm.removeClass("nft-item-template hidden").addClass("nft-item");
          itemElm.attr("id", "nft-item-" + item.tokenId);
          itemElm.on("click", function () {
            var id = $(this).attr("id");
            history.pushState({ id: index }, "", `/nftdetail.html`);
            localStorage.setItem("nftId", index);
            window.location.href = `/nftdetail.html`;
          });
          $("#nft-trending-list").append(itemElm);
          const queryChild = concat("#nft-item-%s%", item.tokenId);
          $(queryChild).attr("data-token-id", item.tokenId);
          $(queryChild + " .nft-item-id").text("#" + Number(item.tokenId));
          $(queryChild + " .nft-item-price").text(
            Number(item.price) / 10 ** 18
          );
          $(queryChild + " .nft-description").text(item.short_description);
          $(queryChild + " .nft-pack").text("Pack: " + item.short_pack);
        });
      });

      // total.callbacks.push((value) => {
      //   $("#nft-count").text(
      //     concat("Showing %s% / %s% NFTs", nfts.value.length, total.value)
      //   );
      // });
      // page.callbacks.push((v) => getNFTs());
      // search.callbacks.push((v) => page.setValue(1));
      // nftSelected.callbacks.push((value) => {
      //   const nftData = nfts.value.find((item) => item.token_id === value);
      //   if (!nftData) return;

      //   // Render payment detail
      //   $(`#modal-payment .nft-image`).attr("src", nftData.token_image);
      //   $(`#modal-payment .nft-name`).text(nftData.name);
      //   $(`#modal-payment .nft-description`).text(nftData.short_description);
      //   $(`#modal-payment .nft-pack`).text("Pack: " + nftData.short_pack);
      //   // Render payment success detail
      //   $(`#modal-payment-success .nft-image`).attr("src", nftData.token_image);
      //   $(`#modal-payment-success .nft-name`).text(nftData.name);
      //   $(`#modal-payment-success .nft-description`).text(
      //     nftData.short_description
      //   );
      //   $(`#modal-payment-success .nft-pack`).text(
      //     "Pack: " + nftData.short_pack
      //   );
      //   modalPayment.handler(true);
      //   paymentMethod.setValue("crypto");
      //   currencyMenu.setValue(false);
      // });
      // modalPayment.callbacks.push(
      //   (value) => !value && nftSelected.setValue(null)
      // );
      // paymentMethod.callbacks.push((value, oldValue) => {
      //   $(concat("#%s%-button", value))
      //     .removeClass("bg-transparent")
      //     .addClass("gradient-button");
      //   $(concat("#%s%-method", value)).show();

      //   $(concat("#%s%-button", oldValue))
      //     .removeClass("gradient-button")
      //     .addClass("bg-transparent");
      //   $(concat("#%s%-method", oldValue)).hide();

      //   currencyMenu.setValue(false);
      // });
      // currencyMenu.callbacks.push((value) => {
      //   if (value) $("#currency-menu").show();
      //   else $("#currency-menu").hide();
      // });
      // currency.callbacks.push((value, oldValue) => {
      //   $("#currency-select-" + value).hide();
      //   $("#currency-select-" + oldValue).show();
      //   $("#currency-select-name").text(value);
      //   $("#payment-currency").text(value);
      //   $("#detail-currency").text(value);
      //   $("#payment-success-currency").text(value);
      //   $("#payment-total-currency").text(value);
      //   currencyMenu.setValue(false);
      //   getNFTPrice();
      // });
      // priceWei.callbacks.push((value, oldValue) => {
      //   const price = web3Instance.utils.fromWei(priceWei.value, "ether");
      //   $("#detail-price").text(price);
      //   $("#payment-price").text(price);
      //   $("#payment-success-price").text(price);
      //   $("#payment-total-price").text(price);
      // });
      // pricUSD.callbacks.push((value, oldValue) => {
      //   $("#payment-usd").text(concat("~%s% USD", value));
      //   $("#payment-total-usd").text(concat("$%s%", value));
      // });
      // minting.callbacks.push((value) => {
      //   if (value) {
      //     $("#loading-" + paymentMethod.value).show();
      //     $("#loading-kyc").show();
      //     $(concat("#%s%-pay", paymentMethod.value)).attr("disabled", "");
      //     $("#confirm-kyc").attr("disabled", "");
      //     modalKYCVertication.prevent = true;
      //     modalPayment.prevent = true;
      //   } else {
      //     $("#loading-" + paymentMethod.value).hide();
      //     $("#loading-kyc").hide();
      //     $(concat("#%s%-pay", paymentMethod.value)).removeAttr("disabled");
      //     $("#confirm-kyc").removeAttr("disabled");
      //     modalKYCVertication.prevent = false;
      //     modalPayment.prevent = false;
      //   }
      // });
      // modalPaymentSuccess.callbacks.push((value) => !value && getNFTs());

      $("#blindbox-detail-metamask").on("click", () =>
        handleConnect("metamask")
      );
      $("#blindbox-detail-walletconnect").on("click", () =>
        handleConnect("walletconnect")
      );
      $("#blindbox-detail-coinbase").on("click", () =>
        handleConnect("coinbase")
      );
      $("#button-header-menu").on("click", () =>
        headerMenu.setValue(!headerMenu.value)
      );

      // handle disconnect
      $("#blindbox-detail-userAdress").on("click", handleDisconnect);
      $("#blindbox-detail-mobile-userAdress").on("click", handleDisconnect);

      // $("#nft-item-8").on("click", function () {
      //   alert("kjkj");
      //   // Ly id ca phn t c click
      //   var id = $(this).attr("id");
      //   console.log("Clicked item ID:", id);
      // });

      // /** @type {number} */
      // let searchTimeout;
      // $("#nft-search").on("input", (e) => {
      //   clearTimeout(searchTimeout);
      //   searchTimeout = setTimeout(() => search.setValue(e.target.value), 1000);
      // });
      // $("#nft-load-more").on("click", () => page.setValue(page.value + 1));
      // $("#nft-list").on("click", (e) => {
      //   e.preventDefault();
      //   const itemElm = $(e.target).closest("#nft-list a.nft-item")[0];
      //   if (!itemElm) return;
      //   nftSelected.setValue(Number($(itemElm).attr("data-token-id")) || null);
      // });
      // $("#crypto-button").on("click", () => paymentMethod.setValue("crypto"));
      // $("#credit-card-button").on("click", () =>
      //   paymentMethod.setValue("credit-card")
      // );
      // $("#payment-login").on("click", () => modalConnect.handler(true));
      // $("#currency-select").on("click", () =>
      //   currencyMenu.setValue(!currencyMenu.value)
      // );
      // $("#currency-menu").on("click", (e) => {
      //   currencyMenu.setValue(false);
      //   const isETH = $(e.target).closest("#eth-currency")[0];
      //   currency.setValue(isETH ? "eth" : "usdt");
      // });
      // $("#first-name").on("input", (e) => firstName.setValue(e.target.value));
      // $("#last-name").on("input", (e) => lastName.setValue(e.target.value));
      // $("#crypto-pay").on("click", handleMint);
      // $("#credit-card-pay").on("click", () => modalKYCVertication.handler());
      // $("#cancel-kyc").on("click", () => modalKYCVertication.handler());
      // $("#confirm-kyc").on("click", handlePay);
      // $("#close-payment-success").on("click", () => modalPayment.handler(null));

      initWallet();
      getNFTs();
      // getNFTPrice();
      // getNFTUSD();
    };
  </script></div><footer class="w-full max-w-1468 mx-auto mt-12 md:mt-56 flex justify-between items-center px-8 flex-col lg:flex-row gap-8"><div class="flex items-center gap-4 flex-wrap md:justify-start justify-center"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctg_logo.svg" id="ikmk2oq" class="h-12 w-auto"/><p id="i0xa1sh" class="text-[#FBF8DF] text-sm px-4 py-1 bg-white/10 rounded-lg">
            Powered by Morpheus Labs
          </p></div><div class="flex-1 text-right"><div class="flex items-center w-full justify-between lg:justify-end lg:gap-9 mb-2"><a href="/facebook" target="_blank"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_facebook.svg" id="ipgp13v"/></a><a href="/twitter" target="_blank"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_twitter.svg" id="imtgypg"/></a><a href="/instagram" target="_blank"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_instagram.svg" id="i5s5pcw"/></a><a href="/google" target="_blank"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_google.svg" id="i9wyqzu"/></a><a href="/youtube" target="_blank"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_youtube.svg" id="i44gjug"/></a><a href="/linkedin" target="_blank"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_linkedin.svg" id="i5krr2f"/></a><a href="/reddit" target="_blank"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_reddit.svg" id="iqh1rm6"/></a><a href="/telegram" target="_blank"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_telegram.svg" id="ijzttvp"/></a></div><div class="lg:justify-end text-white/50 font-normal text-xs leading-4 tracking-004 mt-8 lg:mt-2 w-full text-center flex flex-col lg:flex-row gap-1"><span id="iyono7a">Copyrights  2024 Morpheus Labs. All Rights Reserved. </span><div><a href="/policy">Privacy Policy</a><span id="i1g1fyc"> | </span><a href="/terms">Terms of Use</a></div></div></div></footer></div><div id="blindbox-detail-modal-connect" class="hidden fixed top-0 left-0 w-screen bottom-0 overflow-hidden z-10"><div class="p-4 lg:p-8 h-full overflow-y-auto w-full z-10 pointer-events-none relative"><div class="w-full flex justify-center items-center pointer-events-auto card-container-small mx-auto p-0-5 rounded-2xl"><div class="modal-container"><div class="modal-content p-9 flex flex-col items-center text-white w-full"><div class="w-full flex justify-center items-center pointer-events-auto mx-auto p-0-5 rounded-2xl"><div class="flex flex-col items-center text-white w-full"><img id="blindbox-detail-close-connect" src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_closeModal.svg" class="cursor-pointer"/><div id="i4xchhu" class="font-extrabold text-white leading-loose text-3xl mt-2">
                    Connect Wallet
                  </div><ul class="wallet-list text-sm w-full mt-8"><li id="blindbox-detail-metamask" class="flex justify-center items-center p-2-5 border border-white/15 rounded gap-1 w-full mt-2 cursor-pointer"><img id="blindbox-detail-loading-metamask" src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/loading.svg" class="hidden animate-spin h-4 w-4"/><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_metamask.png" id="iptnfjl" class="w-4 h-4"/>
                      Metamask
                    </li><li id="blindbox-detail-walletconnect" class="flex justify-center items-center p-2-5 border border-white/15 rounded gap-1 w-full mt-2 cursor-pointer"><img id="blindbox-detail-loading-walletconnect" src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/loading.svg" class="hidden animate-spin h-4 w-4"/><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_walletconnect.png" id="ic0d79k" class="w-4 h-4"/>
                      Wallet Connect
                    </li></ul></div></div></div></div></div></div></div><div id="deliver-card" class="fixed top-0 left-0 w-screen bottom-0 overflow-hidden z-10 hidden"><div class="p-4 lg:p-8 h-full overflow-y-auto w-full z-10 pointer-events-none relative"><div class="w-full flex justify-center items-center pointer-events-auto card-container mx-auto p-0-5 rounded-2xl"><div class="modal-container"><div class="modal-content p-9 flex flex-col items-center text-white w-full"><div class="w-full pointer-events-auto mx-auto p-0-5 rounded-2xl"><div id="id0pnzi" class="text-[#FBF8DF] text-2xl text-center">
                  Congratulations
                </div><div id="i9n19kg" class="text-drawn-blindbox-header text-5xl text-center my-4">
                  Received NFT #100049903
                </div></div><div class="flex justify-center items-center"><div class="w-[425px] h-[425px] rounded-3xl drawn-blindbox-image"></div></div><!-- <div class="text-left w-full mt-4">
                <div class="text-white text-sm">Select claim method:</div>
                <div
                  id="claim-physical-card-container"
                  class="flex items-center gap-2 mt-2 px-6 py-3 rounded-full bg-[#4C4C4C] radio-active"
                >
                  <input
                    type="radio"
                    id="physical-card"
                    name="claim-method"
                    value="physical-card"
                    checked
                  />
                  <label
                    for="physical-card"
                    class="text-white text-base font-bold w-full"
                  >
                    Claim physical card
                  </label>
                </div>
                <div
                  id="claim-nft-container"
                  class="flex items-center gap-2 mt-2 px-6 py-3 rounded-full bg-[#4C4C4C]"
                >
                  <input
                    type="radio"
                    id="claim-nft"
                    name="claim-method"
                    value="claim-nft"
                  />
                  <label
                    for="claim-nft"
                    class="text-white text-base font-bold w-full"
                  >
                    Claim NFT
                  </label>
                </div>
                <div
                  id="claim-token-container"
                  class="flex items-center gap-2 mt-2 px-6 py-3 rounded-full bg-[#4C4C4C]"
                >
                  <input
                    type="radio"
                    id="claim-token"
                    name="claim-method"
                    value="claim-token"
                  />
                  <label
                    for="claim-token"
                    class="text-white text-base font-bold w-full"
                  >
                    Claim Token
                    <span class="text-white text-xs font-normal"
                      >(Give up the NFT Card)</span
                    >
                  </label>
                </div>
              </div>

              <div id="physical-card-info" class="w-full mt-5">
                <div class="mt-4">
                  <div class="text-sm">Name</div>
                  <input
                    type="text"
                    class="w-full bg-[#302E26] border border-white/15 px-4 py-2 h-11 rounded-full text-base border-input"
                    placeholder="Enter your email address"
                  />
                </div>
                <div class="mt-4">
                  <div class="text-sm">Contact number</div>
                  <input
                    type="text"
                    class="w-full bg-[#302E26] border border-white/15 px-4 py-2 h-11 rounded-full text-base border-input"
                    placeholder="Enter your contact number"
                  />
                </div>
                <div class="mt-4">
                  <div class="text-sm">Mailing Address</div>
                  <input
                    type="text"
                    class="w-full bg-[#302E26] border border-white/15 px-4 py-2 h-11 rounded-full text-base border-input"
                    placeholder="Enter your mailing address"
                  />
                </div>
              </div>

              <div id="claim-nft-info" class="w-full mt-5 hidden">
                <div class="mt-4">
                  <div class="text-sm">Address</div>
                  <input
                    type="text"
                    class="w-full bg-[#302E26] border border-white/15 px-4 py-2 h-11 rounded-full text-base border-input"
                    placeholder="Enter your address"
                  />
                </div>
              </div>

              <div id="claim-token-info" class="w-full mt-5 hidden">
                <div class="mt-4">
                  <div class="text-sm">Address</div>
                  <input
                    type="text"
                    class="w-full bg-[#302E26] border border-white/15 px-4 py-2 h-11 rounded-full text-base border-input"
                    placeholder="Enter your address"
                  />
                </div>
              </div> --><div class="flex gap-4"><button id="blindbox-detail-claim" class="submit-card-button mt-8 px-4 lg:px-8 h-9 lg:h-11 flex min-w-[200px] rounded-full items-center justify-center border border-white/15 font-bold text-base text-[#2A2A2A]">
                  OK
                </button><button id="blindbox-detail-claim-go-to-collection" class="bg-white mt-8 px-4 lg:px-8 h-9 lg:h-11 flex min-w-[200px] rounded-full items-center justify-center border border-white/15 font-bold text-base text-[#252525]">
                  Go to My Collection
                </button></div></div></div></div></div></div><div id="blindbox-detail-KYC-modal" class="hidden fixed top-0 left-0 w-screen bottom-0 overflow-hidden z-10"><div class="p-4 lg:p-8 h-full overflow-y-auto w-full z-10 pointer-events-none relative"><div class="w-full flex justify-center items-center pointer-events-auto card-container mx-auto p-0-5 rounded-2xl"><div class="modal-container"><div class="modal-content p-9 flex flex-col items-center text-white w-full"><div class="w-full flex justify-center items-center pointer-events-auto mx-auto p-0-5 rounded-2xl"><div class="flex flex-col items-center text-white w-full"><img id="blindbox-detail-close-KYC" src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_closeModal.svg" class="cursor-pointer"/><div id="izijv1h" class="text-white font-extrabold md:text-4xl text-2xl md:leading-375rem leading-8 py-3 mt-3">
                    KYC Verification
                  </div><div id="ib3ogel" class="text-white text-sm mt-4">
                    Connected wallet address:
                  </div><div id="isl14lk" class="text-white md:text-2xl sm:text-base text-xs font-bold mt-4 py-2-5 px-5 border border--ffffff13- rounded-md">
                    0xada334c20a6654c858B78E1735d4d85F753e54Eb
                  </div><div id="i7h2wm7" class="text-sm mt-8 w-max px-4 rounded-lg min-h-[32px] font-bold text-[#1BDC2E] bg--1bdc2e15- leading-32px break-words max-w-full">
                    Doing transaction analysis on your connected wallet
                  </div><div class="flex justify-center md:flex-row md:gap 5 flex-col w-full pt-8 gap-3"><button id="blindbox-detail-KYC-cancel" class="px-4 lg:px-8 h-9 bg-[#4c4c4c] lg:h-11 flex min-w-[140px] rounded-full items-center justify-center font-bold text-base text-wrap">
                      Cancel
                    </button><button id="blindbox-detail-KYC-confirm" class="submit-card-button px-4 lg:px-8 h-9 lg:h-11 flex min-w-[200px] rounded-full items-center justify-center border border-white/15 font-bold text-base text-[#2A2A2A]">
                      Confirm
                    </button></div></div></div></div></div></div></div></div><div id="blindbox-detail-kyc-failed" class="hidden fixed top-0 left-0 w-screen bottom-0 overflow-hidden z-10"><div class="p-4 lg:p-8 h-full overflow-y-auto w-full z-10 pointer-events-none relative"><div class="w-full flex justify-center items-center pointer-events-auto card-container-small mx-auto p-0-5 rounded-2xl"><div class="modal-container"><div class="modal-content p-9 flex flex-col items-center text-white w-full"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_warning.svg" id="idpcwyr"/><div class="flex w-full items-center flex-col"><div id="ix9mekf" class="font-extrabold leading-loose mt-4 text-center">
                  KYC Failed
                </div><div id="ij5zrvy" class="font-bold flex items-center gap-2 leading-normal py-1 px-4 rounded-lg mt-4 letter-025 text-base text-center text-dc3e3c bg-f99e9d1a">
                  KYC failed on the connected wallet!
                </div></div><button id="blindbox-detail-close-kyc-failed" class="text-white gradient-button mt-8 font-bold outline-none text-sm px-20 h-11 text-center rounded border border-white/15">
                OK
              </button></div></div></div></div></div><div id="blindbox-detail-submit-card-modal" class="hidden fixed top-0 left-0 w-screen bottom-0 overflow-hidden z-10"><div class="p-4 lg:p-8 h-full overflow-y-auto w-full z-10 pointer-events-none relative"><div class="w-full flex justify-center items-center pointer-events-auto card-container mx-auto p-0-5 rounded-2xl"><div class="modal-container"><div class="modal-content p-9 flex flex-col items-center text-white w-full"><div class="flex justify-start w-full"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctg_logo.svg" id="im4di28"/></div><div class="flex justify-between items-center w-full py-8"><span id="inoyvp4" class="text-white font-extrabold md:text-4xl text-xl">
                  Submit Your Card
                </span><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_closeModal.svg" id="blindbox-detail-close-submit-card" class="cursor-pointer"/></div><div><div id="ian9tji" class="font-thin text-sm">
                  We provide free vaulting and insurance through our partner
                  Brinks, the global leader in protecting valuables
                </div><div id="ipbv4sv" class="font-thin text-sm mt-3">
                  We accept slabs from top the grading companies: PSA, BGS, SGC
                </div><ul class="list-inside list-disc"><li class="mt-3"><div id="ihhb0e3" class="inline font-bold text-base relative">
                      No sales Tax, shipping, or storage fees
                    </div></li><li class="my-3"><div id="iocnrjb" class="inline font-bold text-base">
                      Earn 1% every time your card is resold
                    </div></li><li><div id="ik6l9o9" class="inline font-bold text-base">
                      Redeem the physical card 24/7 in 150+ countries
                    </div></li></ul></div><div class="flex w-full pt-8 md:justify-start justify-center gap-4 flex-wrap"><button id="blindbox-detail-submit-card-start" class="submit-card-button px-4 lg:px-8 h-9 lg:h-11 flex min-w-[260px] rounded-full items-center justify-center border border-white/15 font-bold text-base text-[#2A2A2A]">
                  Mail Card
                </button><button id="blindbox-detail-submit-card-store" class="px-4 lg:px-8 h-9 lg:h-11 submit-card-button flex min-w-[260px] rounded-full items-center justify-center border border-white/15 font-bold text-base text-[#2A2A2A]">
                  Visit Store
                </button></div></div></div></div></div></div><div id="blindbox-detail-submit-card-store-modal" class="hidden fixed top-0 left-0 w-screen bottom-0 overflow-hidden z-10"><div class="p-4 lg:p-8 h-full overflow-y-auto w-full z-10 pointer-events-none relative"><div class="w-full flex justify-center items-center pointer-events-auto card-container mx-auto p-0-5 rounded-2xl"><div class="modal-container"><div class="modal-content p-9 flex flex-col items-start text-white w-full"><div class="flex justify-start w-full"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctg_logo.svg" id="iy35gjk"/></div><div class="flex justify-between items-center w-full py-8"><span id="idxs7pq" class="text-white font-extrabold md:text-4xl text-xl">
                  Visit Store
                </span></div><div id="i4y8cpi" class="font-bold text-base text-left">Store Address</div><div id="ia53pav" class="font-thin text-sm text-left mt-2">
                Unit 301, Hewlett Centre, 54 Hoi Yuen Road, Kwun Tong, Hong Kong
              </div><div class="flex w-full pt-8 md:justify-start justify-center gap-4 flex-wrap"><button id="blindbox-detail-submit-card-store-appointment" class="px-4 lg:px-8 h-9 lg:h-11 flex min-w-[260px] rounded-full items-center justify-center bg-[#4c4c4c] font-bold text-base text-white">
                  Make An Appointment
                </button></div></div></div></div></div></div><div id="blindbox-detail-submit-card-form-modal" class="hidden fixed top-0 left-0 w-screen bottom-0 overflow-hidden z-10"><div class="p-4 lg:p-8 h-full overflow-y-auto w-full z-10 pointer-events-none relative"><div class="w-full flex justify-center items-center pointer-events-auto card-container mx-auto p-0-5 rounded-2xl"><div class="modal-container bg-[#24221e]"><div class="modal-content p-9 flex flex-col text-white w-full"><div class="flex justify-start w-full"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctg_logo.svg" id="i3s5ual"/></div><div class="flex justify-between items-center w-full"><span id="ivz3ytq" class="text-white font-extrabold md:text-4xl text-xl md:leading-375rem leading-8 py-3 mt-3">
                  Tell us about your collection
                </span><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctp_closeModal.svg" id="blindbox-detail-close-submit-card-form" class="cursor-pointer"/></div><div id="iyxpgv2" class="font-thin text-sm">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
                eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
                enim ad minim veniam, quis nostrud exercitation ullamco laboris
                nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor
                in reprehenderit in voluptate velit esse cillum dolore
              </div><div><div class="mt-4"><div id="ivds9kl" class="font-bold text-base">How many card?</div><input type="text" placeholder="Enter number of cards" class="w-full bg-[#302E26] border border-white/15 px-4 py-2 h-11 rounded-full text-base border-input"/></div><div class="mt-4"><div id="i6mww7l" class="font-bold text-base">
                    Value of your collection
                  </div><input type="text" placeholder="Enter value of your collection" class="w-full bg-[#302E26] border border-white/15 px-4 py-2 h-11 rounded-full text-base border-input"/></div></div><div class="mt-4"><div id="itq7r26" class="text-white font-extrabold md:text-3xl text-xl md:leading-375rem leading-8 py-3 mt-3">
                  Provide Your Information
                </div><div class="mt-4"><div id="ibs7vny" class="font-bold text-base">Your email address</div><input type="text" placeholder="Enter your email address" class="w-full bg-[#302E26] border border-white/15 px-4 py-2 h-11 rounded-full text-base border-input"/></div><div class="mt-4 flex gap-4 sm:flex-row flex-col"><div class="flex-1"><div id="i6y30j6" class="font-bold text-base">First Name</div><input type="text" placeholder="Enter your first name" class="w-full bg-[#302E26] border border-white/15 px-4 py-2 h-11 rounded-full text-base border-input"/></div><div class="flex-1"><div id="ins57kj" class="font-bold text-base">Last Name</div><input type="text" placeholder="Enter your last name" class="w-full bg-[#302E26] border border-white/15 px-4 py-2 h-11 rounded-full text-base border-input"/></div></div><div class="mt-4"><div id="iddxzzl" class="font-bold text-base">Address line</div><input type="text" placeholder="Enter your address line" class="w-full bg-[#302E26] border border-white/15 px-4 py-2 h-11 rounded-full text-base border-input"/></div><div class="mt-4 flex gap-4 sm:flex-row flex-col"><div class="flex-1"><div id="isldqc1" class="font-bold text-base">City</div><input type="text" placeholder="Select" class="w-full bg-[#302E26] border border-white/15 px-4 py-2 h-11 rounded-full text-base border-input"/></div><div class="flex-1"><div id="it55k2n" class="font-bold text-base">State</div><input type="text" placeholder="Select" class="w-full bg-[#302E26] border border-white/15 px-4 py-2 h-11 rounded-full text-base border-input"/></div><div class="flex-1"><div id="i0al3rh" class="font-bold text-base">Zip</div><input type="text" placeholder="000 000" class="w-full bg-[#302E26] border border-white/15 px-4 py-2 h-11 rounded-full text-base border-input"/></div></div><div class="mt-4"><div id="ifdoxwr" class="font-bold text-base">Country</div><input type="text" placeholder="Select" class="w-full bg-[#302E26] border border-white/15 px-4 py-2 h-11 rounded-full text-base border-input"/></div></div><div class="flex w-full pt-8 md:justify-start justify-center"><button id="blindbox-detail-submit-card-generate" class="submit-card-button px-4 lg:px-8 h-9 lg:h-11 flex min-w-[260px] rounded-full items-center justify-center border border-white/15 font-bold text-base text-[#2A2A2A] disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-white/5"><img id="blindbox-detail-submit-card-generate-loading" src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/loading.svg" class="hidden animate-spin h-4 w-4 mr-2"/>
                  Generate shipping Label
                </button></div></div></div></div></div></div><div id="blindbox-detail-generate-shipping-label-success-modal" class="hidden fixed top-0 left-0 w-screen bottom-0 overflow-hidden z-10"><div class="p-4 lg:p-8 h-full overflow-y-auto w-full z-10 pointer-events-none relative"><div class="w-full flex justify-center items-center pointer-events-auto card-container mx-auto p-0-5 rounded-2xl"><div class="modal-container"><div class="modal-content p-9 flex flex-col items-center text-white w-full"><div class="w-full flex justify-center items-center pointer-events-auto mx-auto p-0-5 rounded-2xl"><div class="flex flex-col text-white w-full"><div class="flex justify-center w-full"><img src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/ctg_logo.svg" id="itudli9"/></div><div id="iuegq3e" class="text-3xl mt-4 font-extrabold text-center">
                    Request Submitted!
                  </div><div id="i5u9kay" class="text-sm font-light text-center mt-3">
                    Our team will be in contact with you.
                  </div><div class="flex sm:justify-center justify-center w-full mt-6"><button id="blindbox-detail-generate-shipping-label-success-close" class="submit-card-button px-4 lg:px-8 h-9 lg:h-11 flex min-w-[260px] rounded-full items-center justify-center border border-white/15 font-bold text-base text-[#2A2A2A] disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-white/5"><img id="blindbox-detail-generate-shipping-label-success-close-loading" src="https://ml-webstudio-prod.s3.amazonaws.com/solutions/loading.svg" class="hidden animate-spin h-4 w-4 mr-2"/>
                      Ok
                    </button></div></div></div></div></div></div></div></div><w3m-button id="iqzuhxz-3" class="hidden"></w3m-button><!-- EXTRA & MORPHEUS SDK LIB --><!-- QR SCAN LIB --><!--<script src="https://cdn.jsdelivr.net/npm/web3@4.8.0/dist/web3.min.js"></script> --></body><script>var props = {"iv28i3":{"contract":"---","metadata":"","api":"---"}};
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (function(e){const{contract:t,metadata:n,api:a}=e;if(t){const e=JSON.parse(atob(t||"")||'""');if(!e)return;localStorage.setItem("AppContract",JSON.stringify(e)),window.AppContract&&(window.$appContract=new window.AppContract({contract:e,api:a,metadata:n}),console.log("$appContract ==>>",window.$appContract))}a&&(localStorage.setItem("AppAPI",a),window.AppAPIModule&&(window.$appAPI=new window.AppAPIModule({api:a}),console.log("$appAPI ==>>",window.$appAPI))),localStorage.setItem("AppMetadata",n||"")}.bind(el))(props[el.id]);
          }
          var props = {"i0p37u3":{},"i9dcgkw":{},"i0vluqv":{},"ibabknw":{},"idau5av":{},"inkmmz1":{},"ix30sol":{},"ib1fs57":{},"ids906g":{},"irfclg9":{},"icesgff":{},"in8lbiu":{},"ibffydd":{},"ij9a5yg":{},"ikmk2oq":{},"ipgp13v":{},"imtgypg":{},"i5s5pcw":{},"i9wyqzu":{},"i44gjug":{},"i5krr2f":{},"iqh1rm6":{},"ijzttvp":{},"blindbox-detail-close-connect":{},"blindbox-detail-loading-metamask":{},"iptnfjl":{},"blindbox-detail-loading-walletconnect":{},"ic0d79k":{},"blindbox-detail-close-KYC":{},"idpcwyr":{},"im4di28":{},"blindbox-detail-close-submit-card":{},"iy35gjk":{},"i3s5ual":{},"blindbox-detail-close-submit-card-form":{},"blindbox-detail-submit-card-generate-loading":{},"itudli9":{},"blindbox-detail-generate-shipping-label-success-close-loading":{}};
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (async function(e){if("api"===this.getAttribute("datasource")){const e=this.getAttribute("apiUse");e&&window.addEventListener(e,(async e=>{const t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const a=n=>String.prototype.split.call(t,n).filter(Boolean).reduce(((e,t)=>null!==e&&void 0!==e?e[t]:e),e),o=a(/[,[\]]+?/)||a(/[,[\].]+?/);return void 0===o||o===e?n:o}(e.detail,this.getAttribute("mappingresponse"),0);this.setAttribute("src",t)}))}}.bind(el))(props[el.id]);
          }
          var props = {"isfupe4":{},"blindbox-detail-submit-card":{},"blindbox-detail-login":{},"i9mxegg":{},"blindbox-detail-mobile-submit-card":{},"blindbox-detail-mobile-login":{},"i58c7mi":{},"igttlr7":{},"ihw1svh":{},"icqkjca":{},"draw-blind-crypto-btn":{},"draw-blind-credit-card-btn":{},"iz7c27h":{},"i7yh4xn":{},"iwq1cuj":{},"iee0mr9":{},"i43pjua":{},"i46azpf":{},"iqc4wz4":{},"drawbox-now-btn":{},"i0xa1sh":{},"iyono7a":{},"i1g1fyc":{},"i4xchhu":{},"id0pnzi":{},"i9n19kg":{},"blindbox-detail-claim":{},"blindbox-detail-claim-go-to-collection":{},"izijv1h":{},"ib3ogel":{},"isl14lk":{},"i7h2wm7":{},"blindbox-detail-KYC-cancel":{},"blindbox-detail-KYC-confirm":{},"ix9mekf":{},"ij5zrvy":{},"blindbox-detail-close-kyc-failed":{},"inoyvp4":{},"ian9tji":{},"ipbv4sv":{},"ihhb0e3":{},"iocnrjb":{},"ik6l9o9":{},"blindbox-detail-submit-card-start":{},"blindbox-detail-submit-card-store":{},"idxs7pq":{},"i4y8cpi":{},"ia53pav":{},"blindbox-detail-submit-card-store-appointment":{},"ivz3ytq":{},"iyxpgv2":{},"ivds9kl":{},"i6mww7l":{},"itq7r26":{},"ibs7vny":{},"i6y30j6":{},"ins57kj":{},"iddxzzl":{},"isldqc1":{},"it55k2n":{},"i0al3rh":{},"ifdoxwr":{},"iuegq3e":{},"i5u9kay":{}};
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (async function(e){let t=this.getAttribute("datasource");if("api"===t){const e=this.getAttribute("apiUse");e&&window.addEventListener(e,(async e=>{const t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const a=n=>String.prototype.split.call(t,n).filter(Boolean).reduce(((e,t)=>null!==e&&void 0!==e?e[t]:e),e),o=a(/[,[\]]+?/)||a(/[,[\].]+?/);return void 0===o||o===e?n:o}(e.detail,this.getAttribute("mappingresponse"),0);var n;this.innerHTML=(n=t,isNaN(n)||null===n||""===n?n:parseFloat(n).toFixed(2))}))}else if("smart_contract"===t){const t=e;let a=t.contract||this.getAttribute("contract"),o=t.method||this.getAttribute("method"),s=t.params||"",i=t.isBignumber||!1,r=t.decimal||0,l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;return e?e._isBigNumber?e.div(new window.BigNumber(10).pow(t).toString()).toNumber():new window.BigNumber(e).div(new window.BigNumber(10).pow(t).toString()).toNumber():0},d=JSON.parse(atob(a||"")||'""');if(!d||!d.abi)return;let c=JSON.parse(atob(o||"")||'""');if(!c)return;s=s.split(",").map((e=>e.trim()));const p=new(new window.Web3(d.rpcURL||window.ethereum).eth.Contract)(JSON.parse(d.abi),d.address);let u="";try{u=await p.methods[c.name](...s).call()}catch(n){console.error("Error calling contract method:",n)}i&&r?(u=l(u,parseInt(r||0)),this.innerText=isNaN(u)?0:u):this.innerText=u}}.bind(el))(props[el.id]);
          }</script>
          <!-- EXTRA & MORPHEUS SDK LIB -->
          <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
          <script src="https://webstudio.morpheuslabs.io/sdk/keyboard.js?v=0.0.2"></script>
          <script src="https://webstudio.morpheuslabs.io/sdk/callApi.js?v=0.0.1"></script>
          <!-- QR SCAN LIB -->
          <script src="https://unpkg.com/html5-qrcode"></script>
          <script src="https://webstudio.morpheuslabs.io/sdk/qrscanner.js?v=1"></script>
          <!--<script src="https://cdn.jsdelivr.net/npm/web3@4.8.0/dist/web3.min.js"></script> -->
          <script src="https://webstudio.morpheuslabs.io/sdk/modal.js?v=0.0.1"></script>

          <script>
            
      function getDataByPath(obj, path, defaultValue = undefined) {
        const travel = (regexp) =>
          String.prototype.split
            .call(path, regexp)
            .filter(Boolean)
            .reduce(
              (res, key) =>
                res !== null && res !== undefined ? res[key] : res,
              obj
            );
        const result = travel(/[,\[\]]+?/) || travel(/[,\[\].]+?/);
        return result === undefined || result === obj ? defaultValue : result;
      }
      function formatString(input) {
        // Check if the input is a number or a string that can be converted to a number
        if (!isNaN(input) && input !== null && input !== "") {
          // Convert to number and format with 2 decimal places
          return parseFloat(input).toFixed(2);
        } else {
          // Return the input as is if it's not a number
          return input;
        }
      }
    
            
const SWAP_MODULE = {
  swapInValue: 0,
  swapOutValue: 0,
  userAllowance: 0,
  isApprovedUSDT: false,
  isApprovedQMGT: false,
  contractABI: null,
  contractAddress: null,
  tokenAddress: null,
  contract: null,
  web3: null,
  isBuyPage: window.location.pathname === '/buy-token.html', // Fixme: remove hardcode page
  account: localStorage.getItem('walletAddress'),
  swapContract: JSON.parse(localStorage.getItem('SwapContract') || '""'),
  buyTokenPage: localStorage.getItem('SwapPageURL'),
  swapSuccessPage: localStorage.getItem('SwapSuccessPageURL'),
  tokenSwapABI: [{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}],
  selectorSwapConnectMetamask: '.swap-connect-metamask',
  selectorSwapConnectMetamaskID: 'swap-connect-metamask',
  selectorSwapConnectCoinbase: '.swap-connect-coinbase',
  selectorSwapConnectCoinbaseID: 'swap-connect-coinbase',
  selectorSwapConnectWeb3modal: '.swap-connect-web3modal',
  selectorSwapConnectWeb3modalID: 'swap-connect-web3modal',
  selectorSwapSubmitID: 'swap-submit',
  selectorSwapSubmitID1: 'swap-submit1',
  selectorSwapTxSuccessLinkID: 'swap-tx-success-link',
  selectorSwapInputIn: '#swap-input-in input',
  selectorSwapInputOutID: 'swap-input-out',
  selectorSwapTokenBalance: '.swap-balance-token',
  selectorSwapQMGTBalance: '.swap-balance-qmgt',
  selectorSwapBalanceInID: 'swap-balance-in',
  selectorSwapBalanceOutID: 'swap-balance-out',
  selectorSwapBalanceInID1: 'swap-balance-in1',
  selectorSwapBalanceOutID1: 'swap-balance-out1',
  selectorConnectedAddress: '.swap-connected-address',
  selectorSwapSuccessDescriptionID: 'swap-success-description',

  init: async function() {
    if (!window.ethereum) return;
    this.web3 = new Web3(window.ethereum);

    this.getSwapContract();
    this.getSwapContractABI();
    this.getSwapContractAddress();
    this.getTokenSwapAddress();
    this.getSwapPage();
    this.getSwapSuccessPage();

    // Verify approved
    this.verifyUserApproved();

    this.displayConnectedAccount(this);

    await this.displayBalances();

    this.listenConnectWallet(this);
    this.listenSwapAction(this);
    this.listenChangeSwapInput(this);

    this.renderTxLink();

    let that = this;
    try {
      let sellInput = document.querySelector('#swap-input-in1 input');
      if (sellInput) {
        sellInput.addEventListener('input', async function(event) {
          let value = event.target.value;

          that.swapInValue = value;
          
          const contract = that.swapContractInstance();
          try {
            let result = await contract.methods.calculateUSDT(that.web3.utils.toWei(value, 'ether')).call();
            result = that.convertBigNumber(result, 6);
            result = result ? Math.floor(result * 10000) / 10000 : result;

            let sellOutput = document.querySelector('#swap-input-out1 input');
            if (sellOutput) {
              sellOutput.value = result;
            }
          } catch (error) {
           console.log('Error ==>>', error); 
          }
        })
      }
    } catch (error) {
      
    }
  },

  verifyUserApproved: async function() {
    try {
      const tokenContract = this.tokenContractInstance();
      if (!tokenContract) return;

      let allowanceUSDT = await tokenContract.methods.allowance(this.account, this.contractAddress).call();
      // let allowanceUSDT = await tokenContract.methods.allowance('0xaB39e895C7Ae813b2AeE51b883203e76c6cDb05f', this.contractAddress).call();
      allowanceUSDT = this.convertBigNumber(allowanceUSDT);
      this.isApprovedUSDT = allowanceUSDT > 0;

      const swapContract = this.swapContractInstance();
      let allowanceQMGT = await swapContract.methods.allowance(this.account, this.contractAddress).call();
      // let allowanceQMGT = await swapContract.methods.allowance('0xaB39e895C7Ae813b2AeE51b883203e76c6cDb05f', this.contractAddress).call();
      allowanceQMGT = this.convertBigNumber(allowanceQMGT);
      this.isApprovedQMGT= allowanceQMGT > 0;

      return {
        isApprovedUSDT: this.isApprovedUSDT,
        isApprovedQMGT: this.isApprovedQMGT,
      }
    } catch (error) {
      console.log('error ==>>', error);
    }
  },

  displayConnectedAccount: function(context) {
    let that = this;
    let addrElements = this.getConnectedAddressElement();
    if (!addrElements || !addrElements.length || !this.account) return;

    addrElements.forEach(element => {
      element.innerText = context.shortenAddress(this.account, 4, 6);

      element.addEventListener('click', function(event) {
        that.handleDisconnect();
      })
    })
  },

  handleDisconnect: function() {
    let confirmDisconnect;
    confirmDisconnect = confirm('Do you want to disconnect?');
    if (confirmDisconnect) {
      localStorage.removeItem('walletAddress');
      this.account = null;

      window.location.href = window.location.origin
    }
  },

  listenConnectWallet: function(context) {
    let btnConnectWithID = document.getElementById(this.selectorSwapConnectMetamaskID);
    if (btnConnectWithID) {
      btnConnectWithID.addEventListener('click', function(event) {
        context.connectMetamask();
      });
    }

    let btnCoinbaseID = document.getElementById(this.selectorSwapConnectCoinbaseID);
    if (btnCoinbaseID) {
      btnCoinbaseID.addEventListener('click', function(event) {
        context.connectCoinbase();
      });
    }

    let btnWeb3modalID = document.getElementById(this.selectorSwapConnectWeb3modalID);
    if (btnWeb3modalID) {
      btnWeb3modalID.addEventListener('click', function(event) {
        context.connectWeb3modal();
      });
    }

    let btnsConnect = document.querySelectorAll(this.selectorSwapConnectMetamask);
    if (btnsConnect && btnsConnect.length) {
      for (let index = 0; index < btnsConnect.length; index++) {
        btnsConnect[index].addEventListener('click', function(event) {
          context.connectMetamask();
        });
      }
    }

    let btnsConnectCoinbase = document.querySelectorAll(this.selectorSwapConnectCoinbase);
    if (btnsConnectCoinbase && btnsConnectCoinbase.length) {
      for (let index = 0; index < btnsConnectCoinbase.length; index++) {
        btnsConnectCoinbase[index].addEventListener('click', function(event) {
          context.connectCoinbase();
        });
      }
    }

    let btnsConnectWeb3modal = document.querySelectorAll(this.selectorSwapConnectWeb3modal);
    if (btnsConnectWeb3modal && btnsConnectWeb3modal.length) {
      for (let index = 0; index < btnsConnectWeb3modal.length; index++) {
        btnsConnectWeb3modal[index].addEventListener('click', function(event) {
          context.connectWeb3modal();
        });
      }
    }
  },

  listenSwapAction: function(context) {
    let swapSubmitBtn = document.getElementById(this.selectorSwapSubmitID);
    if (swapSubmitBtn) {
      swapSubmitBtn.addEventListener('click', function(event) {
        context.swapTokens();
      });
    }

    let swapSubmitBtn1 = document.getElementById(this.selectorSwapSubmitID1);
    if (swapSubmitBtn1) {
      swapSubmitBtn1.addEventListener('click', function(event) {
        context.swapTokens();
      });
    }
  },

  listenChangeSwapInput: function(context) {
    let swapInElement = this.getSwapInElement();
    if (!swapInElement) return;

    swapInElement.addEventListener('input', function(event) {
      let amount = parseFloat(event.target.value);
      context.swapInValue = isNaN(amount) ? 0 : amount;

      // Display the output of swap
      context.calculateOutputBuy();
    });
  },

  getSwapContract: function() {
    let localSwapContract = localStorage.getItem('SwapContract');
    if (localSwapContract && !this.swapContract) {
      this.swapContract = JSON.parse(localSwapContract);
    }
  },

  getSwapContractABI: function() {
    let localSwapContractABI = localStorage.getItem('SwapContractABI');
    if (localSwapContractABI) {
      this.contractABI = JSON.parse(localSwapContractABI);
    }
  },

  getSwapContractAddress: function() {
    let localSwapContractAddress = localStorage.getItem('SwapContractAddress');
    if (localSwapContractAddress) {
      this.contractAddress = localSwapContractAddress;
    }
  },

  getTokenSwapAddress: function() {
    let localTokenSwapAddress = localStorage.getItem('TokenSwapAddress');
    if (localTokenSwapAddress) {
      this.tokenAddress = localTokenSwapAddress;
    }
  },

  getSwapPage: function() {
    let localSwapPageURL = localStorage.getItem('SwapPageURL');
    if (localSwapPageURL) {
      this.buyTokenPage = localSwapPageURL;
    }
  },

  getSwapSuccessPage: function() {
    let localSwapSuccessPageURL = localStorage.getItem('SwapSuccessPageURL');
    if (localSwapSuccessPageURL) {
      this.swapSuccessPage = localSwapSuccessPageURL;
    }
  },

  swapTokens: async function() {
    if (!this.swapInValue) {
      alert('Please enter an amount to swap!');

      return;
    }
  
    if (!this.account) {
      alert('Please connect to your wallet!');
      this.connectMetamask();
      return;
    }

    if ((this.isBuyPage && !this.isApprovedUSDT) || (!this.isBuyPage && !this.isApprovedQMGT)) {
      alert('You need to approve before Swap!');
      this.approveToken();
      return;
    }

    if (!this.isBuyPage) {
      if (parseFloat(this.swapInValue) < 0.1) {
        alert('Minimum amount must be 0.1!')

        return;
      }

      if (parseFloat(this.swapInValue) > 100) {
        alert("Maximum amount can't exceed 100!")

        return;
      }
    }

    const contract = this.swapContractInstance();

    try {
      let method = this.isBuyPage ? 'buyTokens' : 'sellTokens'

      const result = await contract.methods[method](this.web3.utils.toWei(this.swapInValue, this.isBuyPage ? 'Mwei': 'ether')).send({ from: this.account });

      // Update balance after success
      this.displayBalances();

      alert('Swap successfully!');

      let suffixInput = this.isBuyPage ? 'USDT' : 'QMGT';
      let suffixOutput = this.isBuyPage ? 'QMGT' : 'USDT';

      let inputData = this.swapInValue + ' ' + suffixInput;
      let outputData;
      try {
        outputData = this.isBuyPage ? await this.calculateOutputBuy() : await this.calculateOutputSell();
      } catch (error) {
        console.log('outputData ', error);
      }
      outputData += ' ' + suffixOutput;

      window.location.href = this.swapSuccessPage + '?hash=' + result.transactionHash + '&inputData=' + inputData + '&outputData=' + outputData;
    } catch (error) {
      console.error('Swap failed', error);
      alert('Swap failed!')
    }
  },

  approveToken: async function() {
    let result;

    try {
      if (this.isBuyPage) {
        const tokenContract = this.tokenContractInstance();
        result = await tokenContract.methods.approve(this.contractAddress, this.web3.utils.toWei(1000000, 'Mwei')).send({ from: this.account });
        this.isApprovedUSDT = true;
      } else {
        const swapContract = this.swapContractInstance();
        result = await swapContract.methods.approve(this.contractAddress, this.web3.utils.toWei(1000000, 'ether')).send({ from: this.account });
        this.isApprovedQMGT = true;
      }
    } catch (error) {
      console.log('Error ==>>', error);
    }

    if (result.transactionHash) {
      alert('Approval successful!');
    }
  },

  calculateOutputBuy: async function() {
    let outputEl = this.getSwapOutElement();
    if (outputEl.element) {
      const contract = this.swapContractInstance();
      try {
        let result = await contract.methods.calculateTokens(this.web3.utils.toWei(this.swapInValue, 'Mwei')).call();
        result = this.convertBigNumber(result);
        result = result ? Math.floor(result * 1000) / 1000 : result
        
        if(outputEl.isInputTag) {
          outputEl.element.value = result;
        } else {
          outputEl.element.innerText = result;
        }

        return result;
      } catch (error) {
        console.error('CalculateOutput failed', error);
      }
    }
  },

  calculateOutputSell: async function() {
    try {
      const contract = this.swapContractInstance();
      let result = await contract.methods.calculateUSDT(this.web3.utils.toWei(this.swapInValue, 'ether')).call();
      result = this.convertBigNumber(result, 6);
      result = result ? Math.floor(result * 10000) / 10000 : result;

      return result;
    } catch (error) {
      console.error('CalculateOutput failed', error);
    }
  },

  connectMetamask: async function() {
    if (this.account) {
      window.location.href = this.buyTokenPage;

      return;
    }

    const provider = window.ethereum;
    if (provider) {
      this.web3 = new Web3(window.ethereum);

      try {
        const accounts = await provider.request({ method: 'eth_requestAccounts' });
        this.account = accounts[0];
        localStorage.setItem('walletAddress', accounts[0]);

        setTimeout(() => {
          if (this.account) {
            window.location.href = this.buyTokenPage;
          }
        }, 500);
      } catch (error) {
        console.error('User denied account access', error);
      }
    } else {
      console.error('Please install MetaMask!');
    }
  },

  connectCoinbase: async function(context) {
    if (this.account) {
      window.location.href = this.buyTokenPage;

      return;
    }

    if (typeof window.coinbaseWalletExtension !== 'undefined') {
      try {
        // Request access to the user's Ethereum accounts
        await window.coinbaseWalletExtension.request({ method: 'eth_requestAccounts' });

        // Get the user's Ethereum address
        const accounts = await window.coinbaseWalletExtension.request({ method: 'eth_accounts' });
        this.account = accounts[0];
        localStorage.setItem('walletAddress', accounts[0]);

        setTimeout(() => {
          if (this.account) {
            window.location.href = this.buyTokenPage;
          }
        }, 500);
      } catch (error) {
        console.error('Error connecting to Coinbase Wallet:', error);
      }
    } else {
      console.error('Coinbase Wallet extension is not available.');
    }
  },

  connectWeb3modal: async function(context) {
    if (this.account) {
      window.location.href = this.buyTokenPage;

      return;
    }

    if (window.modal) {
      try {
        let that = this;
        window.modal.subscribeProvider(function() {
          that.account = window.modal.getAddress();
          localStorage.setItem('walletAddress', that.account);

          setTimeout(() => {
            if (that.account) {
              window.location.href = that.buyTokenPage;
            }
          }, 500);
        });

        await window.modal.open();
      } catch (error) {
        console.error('Error connecting to Coinbase Wallet:', error);
      }
    } else {
      console.error('Coinbase Wallet extension is not available.');
    }
  },

  swapContractInstance: function() {
    if (!this.contractABI || !this.contractAddress) return;

    return new this.web3.eth.Contract(this.contractABI, this.contractAddress);
  },

  tokenContractInstance: function() {
    if (!this.tokenSwapABI || !this.tokenAddress) return;

    return new this.web3.eth.Contract(this.tokenSwapABI, this.tokenAddress);
  },

  displayTokenBalances: async function() {
    let tokenBalanceElements = this.getBalanceTokenElements();
    if (tokenBalanceElements && tokenBalanceElements.length) {
      let balance = 0;
      try {
        const tokenContract = this.tokenContractInstance();
        balance = await tokenContract.methods.balanceOf(this.account).call();
      } catch (e) {}

      tokenBalanceElements.forEach(el => {
        if (el) {
          el.innerText = this.convertBigNumber(balance, 6).toFixed(2);
        }
      })
    }
  },

  displayQMGTBalances: async function() {
    let qmgtBalanceElements = this.getBalanceQMGTElements();
    if (qmgtBalanceElements && qmgtBalanceElements.length) {
      const contract = this.swapContractInstance();
      if (!contract) return;

      let balance = 0;
      try {
        balance = await contract.methods.balanceOf(this.account).call();
      } catch (e) {}

      qmgtBalanceElements.forEach(el => {
        if (el) {
          el.innerText = this.convertBigNumber(balance).toFixed(4);
        }
      })
    }
  },

  displayBalances: async function() {
    this.displayTokenBalances();
    this.displayQMGTBalances();
    // let balanceInEl = this.getBalanceInElement();
    // let balanceOutEl = this.getBalanceOutElement();

    // try {
    //   const contract = this.swapContractInstance();
    //   if (!contract) return;

    //   const result = await contract.methods.balanceOf(this.account).call();
    //   if (balanceOutEl) {
    //     balanceOutEl.innerText = this.convertBigNumber(result).toFixed(2);
    //   }

    //   const tokenContract = new this.web3.eth.Contract(this.tokenSwapABI, this.tokenAddress);
    //   const resultTokenBalance = await tokenContract.methods.balanceOf(this.account).call();
    //   if (balanceInEl) {
    //     balanceInEl.innerText = this.convertBigNumber(resultTokenBalance).toFixed(2);
    //   }
    // } catch (error) {
    //   console.error('DisplayBalance failed', error);
    // }
  },

  getSwapInElement: function() {
    return document.querySelector(this.selectorSwapInputIn);
  },

  getSwapOutElement: function() {
    let outputContainer = document.getElementById(this.selectorSwapInputOutID);
    let outputElement = outputContainer.querySelector('input');

    return {
      isInputTag: !!outputElement,
      element: outputElement ? outputElement : outputContainer,
    };
  },

  getBalanceInElement: function() {
    return document.getElementById(this.selectorSwapBalanceInID);
  },

  getBalanceTokenElements: function() {
    return document.querySelectorAll(this.selectorSwapTokenBalance);
  },

  getBalanceQMGTElements: function() {
    return document.querySelectorAll(this.selectorSwapQMGTBalance);
  },

  getBalanceOutElement: function() {
    return document.getElementById(this.selectorSwapBalanceOutID);
  },

  getBalanceInElement1: function() {
    return document.getElementById(this.selectorSwapBalanceInID1);
  },

  getBalanceOutElement1: function() {
    return document.getElementById(this.selectorSwapBalanceOutID1);
  },

  getConnectedAddressElement: function() {
    return document.querySelectorAll(this.selectorConnectedAddress);
  },

  renderTxLink: function(txHash = '') {
    let txLinkElement = document.getElementById(this.selectorSwapTxSuccessLinkID);
    if (!txLinkElement || !this.swapContract) return;

    let networkScans = {
      '1': 'https://etherscan.io',
      '56': 'https://bscscan.com',
      '137': 'https://polygonscan.com',
      '11155111': 'https://sepolia.etherscan.io',
      '97': 'https://testnet.bscscan.com',
      '80002': 'https://amoy.polygonscan.com',
    }

    let transactionHash = txHash;
    const urlParams = new URLSearchParams(window.location.search);

    if (!txHash) {
      transactionHash = urlParams.get('hash');
    }
    if (!transactionHash) return;

    let inputData = urlParams.get('inputData');
    let outputData = urlParams.get('outputData');
    let successDescription = document.getElementById(this.selectorSwapSuccessDescriptionID);
    if (successDescription && inputData && outputData) {
      successDescription.innerText = 'Swapping ' + inputData + ' for ' + outputData;
    }

    let txLink = networkScans[this.swapContract.network] + '/tx/' + transactionHash;
    if (txLinkElement.tagName === 'A') {
      txLinkElement.href = txLink;
      txLinkElement.target = '_blank';
    } else {
      txLinkElement.addEventListener('click', function() {
        window.open(txLink);
      })
    }
  },

  convertBigNumber: function(bigNumber, decimal = 18) {
    if (!bigNumber) return 0;
  
    if (bigNumber._isBigNumber) {
      return bigNumber.div(new window.BigNumber(10).pow(decimal).toString()).toNumber();
    }
  
    let number = new window.BigNumber(bigNumber);
  
    return number.div(new window.BigNumber(10).pow(decimal).toString()).toNumber();
  },

  shortenAddress: function(address, preLength, sufLength) {
    const prefix = address.substring(0, preLength);
    const suffix = address.substring(address.length - sufLength);

    return prefix + '...' + suffix;
  },
}

SWAP_MODULE.init();

          </script>
          
        </html>